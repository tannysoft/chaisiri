!function(){function e(e){return document.getElementById(e)}function r(e){for(var r,a=e.target.files||e.dataTransfer.files,i=0;r=a[i];i++)!function(e,_){if(e.type.indexOf("image")<0)return jQuery('[data-val="'+_+'"]').val(""),jQuery("#error_message").find(".message_descripiton > div").first().html(__ARF_UPLOAD_IMG_MSG),error_msg();var o,s,l=!1;{var r,a,i;void 0!==_&&(r="",r=_.split("_radio_label_image_"),a=jQuery('[data-id="arfmainformurl"]').val()+"/images/ajax-loader1.gif","arf_add_radio"==r[0]&&void 0!==_&&(i="arf_radio_label_image_"+r[1],o=r[1],jQuery("#"+i).html("<img src="+a+' style="float: left; margin: 0 10px 0 0; height: 20px; width: 20px;" />'),l=!0))}"form_bg"==_?jQuery("#ajax_form_loader").show():"submit_hover_bg"==_?jQuery("#ajax_submit_hover_loader").show():"submit_btn_img"==_&&jQuery("#ajax_submit_loader").show();/arf_img_control_image_control/.test(_)&&jQuery(".arf_imagecontrol_loader").css("display","inline-block");0<=location.host.indexOf("sitepointstatic")||(s=new XMLHttpRequest,r=(new Date).getTime(),i=e.name.lastIndexOf("."),a=e.name.substring(i+1),i=/.*(?=\.)/.exec(e.name),fname=(r+"_"+i).replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+a,jQuery('[data-id="arfmainformurl"]').val(),jQuery('[data-id="arffiledragurl"]').val(),i=document.getElementById("arfajaxurl").value,s.open("POST",i),a=jQuery('input[name="arf_editor_nonce"]').val(),(i=new FormData).append("action","arf_send_form_data_admin"),i.append("files",e),i.append("_nonce",a),s.setRequestHeader("X_FILENAME",fname),s.setRequestHeader("X-FILENAME",fname),s.send(i),s.onreadystatechange=function(e){if(4==s.readyState&&200==s.status){var r=s.responseText;if(/(error_upload)/g.test(r)){var a=jQuery(r).text();return jQuery("#error_message").find(".message_descripiton > div").first().html(a),1==l&&(jQuery("#arf_radio_label_image_"+o).html(""),jQuery("#del_img_id_"+o).hide()),jQuery(".arf_imagecontrol_loader").hide(),error_msg(),jQuery(".arf_form_style_file_upload_loader").hide(),!1}var i,t="",n="",a="";void 0!==_&&(t=_.split("_smiley_image_"),n=_.split("_radio_label_image_"),a=_.split("_image_control_")),"form_bg"==_&&"undefined"!=_?(document.getElementById("imagename_form").value=r,jQuery.isFunction(change_form_bg_img)&&change_form_bg_img()):"submit_hover_bg"==_&&"undefined"!=_?(document.getElementById("imagename_submit_hover").value=r,jQuery.isFunction(change_submit_hover_img)&&change_submit_hover_img()):"arf_smiley_add"==t[0]&&"undefined"!=_?(i=t[1]+"_arf_smiley_"+r,document.getElementById("arf_smiley_image_name").value=i,"undefined"!=typeof change_smiley_image&&change_smiley_image()):"arf_add_radio"==n[0]&&void 0!==_?(i=n[1]+"_arf_radio_image_"+r,document.getElementById("arf_radio_image_name").value=i,jQuery.isFunction(change_radio_image)&&change_radio_image(n[1])):"arf_img_control"==a[0]?(i=a[1]+"_image_control_"+r,i=document.getElementById("arfuploadurl").value+r,document.getElementById("arfimage_url_"+a[1]).value=i,jQuery(".arf_imagecontrol_loader").css("display","none")):(document.getElementById("imagename").value=r,jQuery.isFunction(change_submit_img)&&change_submit_img())}})}(r,jQuery(this).attr("data-val"))}function a(e){for(var r,a=e.target.files||e.dataTransfer.files,i=0;r=a[i];i++)!function(e,i){var r=e.name,a=r.lastIndexOf(".");if("csv"!=(a=r.substring(a+1)).toLowerCase())return jQuery("#error_message").find(".message_descripiton > div").first().html(__ARF_UPLOAD_CSV_MSG),error_msg(),jQuery("#arf_preset_data_"+i).val("");jQuery(".arf_preset_field_content_wrapper_"+i).find("button.btn_2").css("opacity","0.5");var t=new XMLHttpRequest,n=(new Date).getTime(),r=e.name.lastIndexOf("."),a=e.name.substring(r+1),r=/.*(?=\.)/.exec(e.name);fname=(n+"_"+r).replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+a;r=jQuery(".arf_ajax_url").val();t.open("POST",r,!0),t.setRequestHeader("X_FILENAME",fname),t.setRequestHeader("X-FILENAME",fname);a=jQuery('input[name="arf_editor_nonce"]').val(),r=new FormData;r.append("action","arf_add_new_preset"),r.append("preset_file",e),r.append("_nonce",a),t.send(r),t.onreadystatechange=function(e){var r,a;4==t.readyState&&200==t.status&&(jQuery(".arf_preset_field_content_wrapper_"+i).find("button.btn_2").css("opacity",""),r=t.responseText,/error/g.test(r)?(a=r.split("~|~"),jQuery("#error_message").find(".message_descripiton > div").first().html(a[1]),error_msg(),jQuery("#arf_preset_data_"+i).val("")):jQuery("#arf_preset_data_"+i).attr("db_file_name",r))}}(r,jQuery(this).attr("data-val"))}window.File&&window.FileList&&window.FileReader,jQuery(document).on("click",".original",function(){e(jQuery(this).attr("id")).addEventListener("change",r,!1),(new XMLHttpRequest).upload}),jQuery(document).on("click",".arf_preset_data",function(){e(jQuery(this).attr("id")).addEventListener("change",a,!1),(new XMLHttpRequest).upload}),jQuery(".iframe_original_btn").click(function(e){if(""!=jQuery('[data-id="arfmainform_bg_img"]').val())return!1;var t=jQuery(this).attr("data-id").replace("div_","");jQuery("#"+t+"_iframe").contents().find("#fileselect").click();var n=jQuery(this).attr("data-id");jQuery("#arf_field_"+n+"_container").find(".help-block").empty(),jQuery("#progress_"+t).hide();var r,_,a,o,i,s,l=jQuery("#"+t+"_iframe").contents().find("#fileselect").val();void 0!==l&&""!=l&&(i=jQuery("#file_types_"+t).val(),types_arr=i.split(","),n=jQuery(this).attr("data-id"),a=l.replace(/C:\\fakepath\\/i,""),jQuery(this).attr("data-form-id"),r=(new Date).getTime(),i=a.lastIndexOf("."),i=a.substring(i+1),_=(r+"_"+/.*(?=\.)/.exec(a)).replace(/[^\w\s]/gi,"").replace(" ","")+"."+i,a=t,jQuery('[data-id="arfmainformurl"]').val(),o=jQuery('[data-id="arffiledragurl"]').val(),i=jQuery(".arf_ajax_url").val(),("arfmfbi"==t?jQuery("#ajax_form_loader"):jQuery("#ajax_submit_loader")).show(),jQuery("#"+t+"_iframe").contents().find("form").attr("action",i+"?action=arf_send_form_data_admin&frm="+frm_id+"&field_id="+a+"&fname="+_+"&file_type=&types_arr="+types_arr+"&is_preview=0&ie_version=9&browser=Internet Explorer"),jQuery("#"+t+"_iframe").contents().find("form").submit(),jQuery("#div_"+t).css("margin-top","-4px"),jQuery("#info_"+t).css("display","inline-block"),jQuery("#info_"+t+" #file_name").html(l.replace(/C:\\fakepath\\/i,"")),jQuery("#info_"+t+" .percent").html("").show(),jQuery("#info_"+t+" #percent").html("Uploading..."),jQuery("#progress_"+t+" div.bar").animate({width:"100%"},"slow"),s=setInterval(function(){jQuery("#"+t+"_iframe").contents()&&jQuery("#"+t+"_iframe").load(function(){if(0<(jQuery("#"+t+"_iframe").contents()?jQuery("#"+t+"_iframe").contents().find(".uploaded").length:0)){if(clearInterval(s),jQuery("#progress_"+t).removeClass("active"),jQuery("#imagename_form").val(_),jQuery("#form_bg_img_div").css("background","none"),jQuery("#form_bg_img_div").css("border","0px"),jQuery("#form_bg_img_div").css("padding","0px"),jQuery("#form_bg_img_div").css("box-shadow","none"),!jQuery.isFunction(change_form_bg_img))return;change_form_bg_img(),jQuery("#div_"+t).hide(),jQuery("#remove_"+t).css("display","block"),jQuery("#div_"+t).css("margin-top","0px"),jQuery("#remove_"+t).css("margin-top","-4px"),jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+o+'/core/views/iframe.php"></iframe>')}if(0<(jQuery("#"+t+"_iframe").contents()?jQuery("#"+t+"_iframe").contents().find(".error_upload").length:0)){clearInterval(s);var e,r=n;jQuery('input[name="file'+r+'"]').attr("data-file-valid","false"),i="undefined"!=typeof __ARFERR?__ARFERR:"Sorry, this file type is not permitted for security reasons.",e=void 0!==jQuery("#field_"+t).attr("data-invalid-message")&&""!=jQuery("#field_"+t).attr("data-invalid-message")?jQuery("#field_"+t).attr("data-invalid-message"):i,jQuery("#arf_field_"+r+"_container").removeClass("success");var a=jQuery("#arf_field_"+r+"_container .controls"),i=a.parents(".control-group").first(),r=i.find(".help-block").first(),a=a.closest("form").find('[data-id="form_id"]').val();if("advance"==("advance"==jQuery('[data-id="form_tooltip_error_'+a+'"]').val()?"advance":"normal")){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(i,r,e)}else r.length?(r=jQuery("<ul><li>"+e+"</li></ul>"),i.find(".controls .help-block").append(r)):(r=jQuery('<div class="help-block"><ul><li>'+e+"</li></ul></div>"),i.find(".controls").append(r));jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+o+'/core/views/iframe.php"></iframe>')}})},100))}),jQuery(".iframe_submit_original_btn").click(function(e){if(""!=jQuery("#arfsubmitbuttonimagesetting").val())return!1;var t=jQuery(this).attr("data-id").replace("div_","");jQuery("#"+t+"_iframe").contents().find("#fileselect").click();var n=jQuery(this).attr("data-id");jQuery("#arf_field_"+n+"_container").find(".help-block").empty();var r,_,o,a,s,i,l,d=jQuery("#"+t+"_iframe").contents().find("#fileselect").val();""!=d&&void 0!==d&&(i=jQuery("#file_types_"+t).val(),types_arr=i.split(","),n=jQuery(this).attr("data-id"),r=d.replace(/C:\\fakepath\\/i,""),jQuery(this).attr("data-form-id"),a=(new Date).getTime(),i=r.lastIndexOf("."),i=r.substring(i+1),_=/.*(?=\.)/.exec(r),o=(a+"_"+_).replace(/[^\w\s]/gi,"").replace(" ","")+"."+i,a=t,jQuery('[data-id="arfmainformurl"]').val(),s=jQuery("[data-id='arffiledragurl']").val(),i=jQuery(".arf_ajax_url").val(),jQuery("#"+t+"_iframe").contents().find("form").attr("action",i+"?action=arf_send_form_data_admin&frm="+frm_id+"&field_id="+a+"&fname="+o+"&file_type=&types_arr="+types_arr+"&is_preview=0&ie_version=9&browser=Internet Explorer"),jQuery("#"+t+"_iframe").contents().find("form").submit(),jQuery("#div_"+t).css("margin-top","-4px"),jQuery("#info_"+t).css("display","inline-block"),jQuery("#info_"+t+" #file_name").html(d.replace(/C:\\fakepath\\/i,"")),jQuery("#info_"+t+" .percent").html("").show(),jQuery("#info_"+t+" #percent").html("Uploading..."),jQuery("#progress_"+t+" div.bar").animate({width:"100%"},"slow"),l=setInterval(function(){jQuery("#"+t+"_iframe").contents()&&jQuery("#"+t+"_iframe").load(function(){if(0<jQuery("#"+t+"_iframe").contents().find(".uploaded").length){if(clearInterval(l),jQuery("#progress_"+t).removeClass("active"),jQuery("#imagename").val(o),jQuery("#submit_btn_img_div").css("background","none"),jQuery("#submit_btn_img_div").css("border","0px"),jQuery("#submit_btn_img_div").css("padding","0px"),jQuery("#submit_btn_img_div").css("box-shadow","none"),!jQuery.isFunction(change_submit_img))return;change_submit_img(),jQuery("#div_"+t).hide(),jQuery("#remove_"+t).css("display","block"),jQuery("#div_"+t).css("margin-top","0px"),jQuery("#remove_"+t).css("margin-top","-4px"),jQuery("#info_"+t+" #percent").html("File Uploaded"),jQuery('input[name="file'+n+'"]').val(_),jQuery('input[name="item_meta['+n+']"]').val(_),jQuery('input[name="file'+n+'"]').attr("data-file-valid","true"),jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+s+'/core/views/iframe.php"></iframe>')}if(0<jQuery("#"+t+"_iframe").contents().find(".error_upload").length){clearInterval(l);var e,r=n;jQuery('input[name="file'+r+'"]').attr("data-file-valid","false"),i="undefined"!=typeof __ARFERR?__ARFERR:"Sorry, this file type is not permitted for security reasons.",e=void 0!==jQuery("#field_"+t).attr("data-invalid-message")&&""!=jQuery("#field_"+t).attr("data-invalid-message")?jQuery("#field_"+t).attr("data-invalid-message"):i,jQuery("#arf_field_"+r+"_container").removeClass("success");var a=jQuery("#arf_field_"+r+"_container .controls"),i=a.parents(".control-group").first(),r=i.find(".help-block").first(),a=a.closest("form").find('[data-id="form_id"]').val();if("advance"==("advance"==jQuery('[data-id="form_tooltip_error_'+a+'"]').val()?"advance":"normal")){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(i,r,e)}else r.length?(r=jQuery("<ul><li>"+e+"</li></ul>"),i.find(".controls .help-block").append(r)):(r=jQuery('<div class="help-block"><ul><li>'+e+"</li></ul></div>"),i.find(".controls").append(r));jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+s+'/core/views/iframe.php"></iframe>')}})},100))}),jQuery(".iframe_submit_hover_original_btn").click(function(e){if(""!=jQuery("#arfsubmithoverbuttonimagesetting").val())return!1;var t=jQuery(this).attr("data-id").replace("div_","");jQuery("#"+t+"_iframe").contents().find("#fileselect").click();var n=jQuery(this).attr("data-id");jQuery("#arf_field_"+n+"_container").find(".help-block").empty();var r,_,o,a,s,i,l,d=jQuery("#"+t+"_iframe").contents().find("#fileselect").val();""!=d&&void 0!==d&&(i=jQuery("#file_types_"+t).val(),types_arr=i.split(","),n=jQuery(this).attr("data-id"),r=d.replace(/C:\\fakepath\\/i,""),jQuery(this).attr("data-form-id"),a=(new Date).getTime(),i=r.lastIndexOf("."),i=r.substring(i+1),_=/.*(?=\.)/.exec(r),o=(a+"_"+_).replace(/[^\w\s]/gi,"").replace(" ","")+"."+i,a=t,jQuery('[data-id="arfmainformurl"]').val(),s=jQuery("[data-id='arffiledragurl']").val(),i=jQuery(".arf_ajax_url").val(),jQuery("#"+t+"_iframe").contents().find("form").attr("action",i+"?action=arf_send_form_data_admin&frm="+frm_id+"&field_id="+a+"&fname="+o+"&file_type=&types_arr="+types_arr+"&is_preview=0&ie_version=9&browser=Internet Explorer"),jQuery("#"+t+"_iframe").contents().find("form").submit(),jQuery("#div_"+t).css("margin-top","-4px"),jQuery("#info_"+t).css("display","inline-block"),jQuery("#info_"+t+" #file_name").html(d.replace(/C:\\fakepath\\/i,"")),jQuery("#info_"+t+" .percent").html("").show(),jQuery("#info_"+t+" #percent").html("Uploading..."),jQuery("#progress_"+t+" div.bar").animate({width:"100%"},"slow"),l=setInterval(function(){jQuery("#"+t+"_iframe").contents()&&jQuery("#"+t+"_iframe").load(function(){if(0<jQuery("#"+t+"_iframe").contents().find(".uploaded").length){if(clearInterval(l),jQuery("#progress_"+t).removeClass("active"),jQuery("#imagename").val(o),jQuery("#submit_hover_btn_img_div").css("background","none"),jQuery("#submit_hover_btn_img_div").css("border","0px"),jQuery("#submit_hover_btn_img_div").css("padding","0px"),jQuery("#submit_hover_btn_img_div").css("box-shadow","none"),!jQuery.isFunction(change_submit_hover_img))return;change_submit_hover_img(),jQuery("#div_"+t).hide(),jQuery("#remove_"+t).css("display","block"),jQuery("#div_"+t).css("margin-top","0px"),jQuery("#remove_"+t).css("margin-top","-4px"),jQuery("#info_"+t+" #percent").html("File Uploaded"),jQuery('input[name="file'+n+'"]').val(_),jQuery('input[name="item_meta['+n+']"]').val(_),jQuery('input[name="file'+n+'"]').attr("data-file-valid","true"),jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+s+'/core/views/iframe.php"></iframe>')}if(0<jQuery("#"+t+"_iframe").contents().find(".error_upload").length){clearInterval(l);var e,r=n;jQuery('input[name="file'+r+'"]').attr("data-file-valid","false"),i="undefined"!=typeof __ARFERR?__ARFERR:"Sorry, this file type is not permitted for security reasons.",e=void 0!==jQuery("#field_"+t).attr("data-invalid-message")&&""!=jQuery("#field_"+t).attr("data-invalid-message")?jQuery("#field_"+t).attr("data-invalid-message"):i,jQuery("#arf_field_"+r+"_container").removeClass("success");var a=jQuery("#arf_field_"+r+"_container .controls"),i=a.parents(".control-group").first(),r=i.find(".help-block").first(),a=a.closest("form").find('[data-id="form_id"]').val();if("advance"==("advance"==jQuery('[data-id="form_tooltip_error_'+a+'"]').val()?"advance":"normal")){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(i,r,e)}else r.length?(r=jQuery("<ul><li>"+e+"</li></ul>"),i.find(".controls .help-block").append(r)):(r=jQuery('<div class="help-block"><ul><li>'+e+"</li></ul></div>"),i.find(".controls").append(r));jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+s+'/core/views/iframe.php"></iframe>')}})},100))})}();