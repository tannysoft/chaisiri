function $id(e){return document.getElementById(e)}function Output(e){$id("messages")}function FileDragHover(e){e.stopPropagation(),e.preventDefault(),"arf_disable"!=jQuery(e.target).parents(".arfmainformfield").attr("data-view")&&(e.target.className="dragover"==e.type?"arf_hover_file arf_file_drag_reply_container":"arf_file_drag_reply_container")}function FileSelectHandler(e){var t=e.target.files||e.dataTransfer.files,f=t,c=jQuery(this),p=jQuery(this).attr("data-validation-maxupload-maxupload")||0,p=parseInt(p);if(t.length<1)return!1;for(var a=0;t[a];a++){var i,r,n=c.attr("id").split("field_")[1],o=jQuery("#arf_multi_file_uploader_"+n).find(".arfprogress:last").attr("arfupldcnt"),d="undefined"==(d=jQuery("#arf_multi_file_uploader_"+n).find(".arfprogress").length)||isNaN(d)||""==d?1:parseInt(d)+1,o="undefined"==o||isNaN(o)||""==o?1:parseInt(o)+1,l=d,d=jQuery(this).attr("name").split("file")[1];jQuery("#file_types_"+n).val(),jQuery(this).attr("data-form-id"),jQuery(this).attr("data-form-data-id"),jQuery("#file_size_"+n).val();void 0!==p&&""!=p&&0!=p||(i=document.getElementById("arf_multi_file_uploader_"+n).innerHTML,r='<div class = "arfprogress progress-striped" id = "progress_'+n+"_"+o+'" arfupldcnt="'+o+'" style = "display: block;" > <div style = "width:0%;" class = "bar" > </div></div > <div style = "display: inline-block;" class = "arf_info" id = "info_'+n+"_"+o+'" > <span class = "percent" > % Completed </span><span class="percent" id="percent">0</span > </div>',document.getElementById("arf_multi_file_uploader_"+n).innerHTML=i+r,jQuery("#arf_multi_file_uploader_"+n).show()),""!=p&&0!=p&&l<=p&&(i=document.getElementById("arf_multi_file_uploader_"+n).innerHTML,r='<div class = "arfprogress progress-striped" id = "progress_'+n+"_"+o+'" arfupldcnt="'+o+'" style = "display: block;" > <div style = "width:0%;" class = "bar" > </div></div > <div style = "display: inline-block;" class = "arf_info" id = "info_'+n+"_"+o+'" > <span class = "percent" > % Completed </span><span class="percent" id="percent">0</span > </div>',document.getElementById("arf_multi_file_uploader_"+n).innerHTML=i+r,jQuery("#arf_multi_file_uploader_"+n).show())}var u=setInterval(function(){if(!ajaxProcess){var e=c.attr("id").split("field_")[1],t=c.attr("name").split("file")[1],a=jQuery("#file_types_"+e).val(),i=c.attr("data-form-id"),r=c.attr("data-form-data-id"),n=t,o=jQuery("#file_size_"+e).val(),d=jQuery("#arf_multi_file_uploader_"+e).find(".arfprogress.counting:last").attr("arfupldcnt"),t="undefined"==(t=jQuery("#arf_multi_file_uploader_"+e).find(".arfprogress.counting").length)||isNaN(t)||""==t?1:parseInt(t)+1,d="undefined"==d||isNaN(d)||""==d?1:parseInt(d)+1;0<(t=""!=p&&0!=p&&p<t?0:t)&&UploadFile(f[Object.keys(f)[0]],e,a,i,n,o,r,d,t);for(var l=new Object,s=0;s<f.length;s++)0!==s&&(l[s-1]=f[s],l.length=s);f=l,jQuery.isEmptyObject(f)&&clearInterval(u)}},0)}function FileSelectHandlerDrag(e){if(window.is_drag=!0,e.preventDefault(),"arf_disable"==jQuery(e.target).parents(".arfmainformfield").attr("data-view"))return!1;FileDragHover(e);var t=e.target.files||e.dataTransfer.files;if(ajaxProcess)return!1;for(var f=t,e=jQuery(this).attr("data-id"),c=jQuery("#"+e).attr("data-validation-maxupload-maxupload")||0,p=jQuery(this).data("id"),a=0;t[a];a++){var i=jQuery("#"+p).attr("id").split("field_")[1],r=jQuery("#arf_multi_file_uploader_"+i).find(".arfprogress:last").attr("arfupldcnt"),n="undefined"==(n=jQuery("#arf_multi_file_uploader_"+i).find(".arfprogress").length)||isNaN(n)||""==n?1:parseInt(n)+1,r="undefined"==r||isNaN(r)||""==r?1:parseInt(r)+1,o=n,n=jQuery("#"+p).attr("name").split("file")[1];jQuery(".arf_field_"+n).addClass("arf_success");var d,l;jQuery("#file_types_"+i).val(),jQuery("#"+p).attr("data-form-id"),jQuery("#"+p).attr("data-form-data-id"),jQuery("#file_size_"+i).val();if(""!=c&&0!=c||(d=document.getElementById("arf_multi_file_uploader_"+i).innerHTML,l='<div class = "arfprogress progress-striped" id = "progress_'+i+"_"+r+'" arfupldcnt="'+r+'" style = "display: block;" > <div style = "width:0%;" class = "bar" > </div></div > <div style = "display: inline-block;" class = "arf_info" id = "info_'+i+"_"+r+'" > <span class = "percent" > % Completed </span><span class="percent" id="percent">0</span > </div>',document.getElementById("arf_multi_file_uploader_"+i).innerHTML=d+l,jQuery("#arf_multi_file_uploader_"+i).show()),""!=c&&0!=c&&o<=c&&(d=document.getElementById("arf_multi_file_uploader_"+i).innerHTML,l='<div class = "arfprogress progress-striped" id = "progress_'+i+"_"+r+'" arfupldcnt="'+r+'" style = "display: block;" > <div style = "width:0%;" class = "bar" > </div></div > <div style = "display: inline-block;" class = "arf_info" id = "info_'+i+"_"+r+'" > <span class = "percent" > % Completed </span><span class="percent" id="percent">0</span > </div>',document.getElementById("arf_multi_file_uploader_"+i).innerHTML=d+l,jQuery("#arf_multi_file_uploader_"+i).show()),!document.getElementById(p).multiple)break}var u=setInterval(function(){if(!ajaxProcess){var e=jQuery("#"+p).attr("id").split("field_")[1],t=jQuery("#"+p).attr("name").split("file")[1],a=jQuery("#file_types_"+e).val(),i=jQuery("#"+p).attr("data-form-id"),r=jQuery("#"+p).attr("data-form-data-id"),n=t,o=jQuery("#file_size_"+e).val(),d=jQuery("#arf_multi_file_uploader_"+e).find(".arfprogress.counting:last").attr("arfupldcnt"),t="undefined"==(t=jQuery("#arf_multi_file_uploader_"+e).find(".arfprogress.counting").length)||isNaN(t)||""==t?1:parseInt(t)+1;""!=c&&0!=c&&c<t&&(t=0),d="undefined"==d||isNaN(d)||""==d?1:parseInt(d)+1,0<t&&UploadFile(f[Object.keys(f)[0]],e,a,i,n,o,r,d,t);for(var l=new Object,s=0;s<f.length;s++)0!==s&&(l[s-1]=f[s],l.length=s);f=l,jQuery.isEmptyObject(f)&&clearInterval(u),document.getElementById(p).multiple||clearInterval(u)}},1e3)}function UploadFile(file,field_id_val,field_type,frmid,field_name_id,field_size,frmdataid,arf_new_id,newupload_count){if(ajaxProcess=!0,!(0<=location.host.indexOf("sitepointstatic"))){var xhr=new XMLHttpRequest,file_index=file.name.lastIndexOf("."),total_files=newupload_count,max_file_upload_limit=jQuery("#field_"+field_id_val).attr("data-validation-maxupload-maxupload")||0,file_extension=file.name.substring(file_index+1),file_extension=file_extension.toLowerCase(),types_arr=field_type.split(","),arf_file_size=!0;"auto"!=field_size&&" "!=field_size&&0!=field_size&&(arf_file_size=file.size<=field_size);var arf_file_validation=0<=field_type.indexOf(file_extension),seconds=(new Date).getTime(),funique_id=frmid+"_"+field_name_id+"_"+seconds,Qa,Ra,Sa,La,Ma,Na,Oa,Pa;if(arf_file_validation&&arf_file_size&&"php"!=file_extension&&"php3"!=file_extension&&"php4"!=file_extension&&"php5"!=file_extension&&"pl"!=file_extension&&"py"!=file_extension&&"jsp"!=file_extension&&"asp"!=file_extension&&"exe"!=file_extension&&"cgi"!=file_extension){var index=file.name.lastIndexOf("."),extension=file.name.substring(index+1),filename=/.*(?=\.)/.exec(file.name),fname1=frmid+"_"+field_name_id+"_"+seconds+"_"+filename,fname=fname1.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+extension,field_id=field_id_val,is_preview=jQuery('[data-id="is_form_preview_'+frmid+'"]').val(),arfmainformurl=jQuery('[data-id="arfmainformurl"]').val(),arffiledragurl=jQuery("[data-id='arffiledragurl']").val();if(!jQuery.isFunction(is_ssl_replace))return;arfmainformurl=is_ssl_replace(arfmainformurl),xhr.open("POST",__ARFAJAXURL,!0);var form_random_key=field_id.split("_"),random_key=form_random_key[1];jQuery("#arf_submit_btn_"+random_key).attr("disabled","disabled");var param_data=new FormData,token=jQuery("#arf_file_token_"+frmid).val();param_data.append("action","arf_send_form_data"),param_data.append("frm",frmid),param_data.append("field_id",field_id),param_data.append("file_type",file.type),param_data.append("types_arr",types_arr),param_data.append("is_preview",is_preview),param_data.append("files",file),param_data.append("token",token),jQuery('.arf_file_drag_reply_container[data-id="field_'+field_id+'"]').addClass("disable"),jQuery("#progress_"+field_id_val+"_"+arf_new_id).addClass("arfprogress"),jQuery("#progress_"+field_id_val+"_"+arf_new_id).addClass("active").addClass("counting").show(),jQuery("#info_"+field_id_val+"_"+arf_new_id).css("display","inline-block"),xhr.upload.addEventListener("progress",function(e){e=parseFloat(0+e.loaded/e.total*100),e=Math.round(e);jQuery("#progress_"+field_id_val+"_"+arf_new_id+" div.bar").css("width",e+"%"),jQuery("#info_"+field_id_val+"_"+arf_new_id+" #percent").html(e)},!1),xhr.addEventListener("load",function(e){setTimeout(function(){jQuery("#info_"+field_id_val+"_"+arf_new_id+" #percent").html("100"),jQuery("#progress_"+field_id_val+"_"+arf_new_id+" div.bar").css("width","100%")},300)},!1),xhr.setRequestHeader("X_FILENAME",fname),xhr.setRequestHeader("X-FILENAME",fname),xhr.send(param_data),xhr.onreadystatechange=function(e){if(4==xhr.readyState&&200==xhr.status){var data=xhr.responseText;if(jQuery('input[name="file'+field_id+'"]').attr("data-is-insecure-file","false"),data.match(/(error_upload_security)/g)){jQuery("#progress_"+field_id_val).hide(),jQuery("#progress_"+field_id_val+"_"+arf_new_id).addClass("counting"),jQuery("#info_"+field_id_val).hide();var file_error=data,arf_invalid_file_message=file_error,field_id_arr=jQuery("#field_"+field_id_val).attr("name").split("file"),field_id=field_id_arr[1],display_original_error=!0;jQuery('input[name="file'+field_id+'"]').attr("data-is-insecure-file","true"),jQuery('input[name="file'+field_id+'"]').hasClass("arf_reply_drag_file")?(jQuery('input[name="file'+field_id+'"]').attr("data-file-valid","false"),jQuery('input[name="file'+field_id+'"]').trigger("change")):jQuery('input[name="file'+field_id+'"]').attr("data-file-valid","false"),jQuery("#arf_field_"+field_id+"_"+frmdataid+"_container").removeClass("arf_success");var $this=jQuery("#arf_field_"+field_id+"_"+frmdataid+"_container .controls"),$controlGroup=$this.parents(".control-group").first(),$helpBlock=$controlGroup.find(".help-block").first(),form_id=$this.closest("form").find('[data-id="form_id"]').val(),error_type="advance"==jQuery('[data-id="form_tooltip_error_'+form_id+'"]').val()?"advance":"normal",seconds=(new Date).getTime(),image_directory_url=document.getElementById("arf_image_directory_url_"+frmid+"_"+frmdataid).value,upload_content='<div id="arf_'+funique_id+"_"+seconds+'" class="arf_file_info_item"><span id="remove_'+field_id_val+'" class="ajax-file-remove" data-info-id="info_'+field_id_val+"_"+arf_new_id+'" data-progress-id="progress_'+field_id_val+"_"+arf_new_id+'" style="position: relative; overflow: hidden;" data-current-file-size="'+file.size+'" data-current-file-size-counter="'+arf_new_id+'" data-form-data-id="'+frmdataid+'" data-form-id="'+frmid+'" data-id="'+field_name_id+'" file-data-id="'+funique_id+"_"+seconds+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+file.name+"</span></div></span></div>",images,upload_file_key;if(jQuery("#info_"+field_id_val+"_"+arf_new_id).after(upload_content),display_original_error)if("advance"==error_type){if(!jQuery.isFunction(arf_show_tooltip))return;var form_id=$controlGroup.closest("form").find('[data-id="form_id"]').val(),color=jQuery('[data-id="form_tooltip_error_'+form_id+'"]').attr("data-color"),position=jQuery('[data-id="form_tooltip_error_'+form_id+'"]').attr("data-position"),border_color="#f4f4f4",bounceeffect="bounceInRight";"left"==position?bounceeffect="bounceInLeft":"right"==position?bounceeffect="bounceInRight":"top"==position?bounceeffect="bounceInDown":"bottom"==position&&(bounceeffect="bounceInUp"),jQuery("#arf_"+funique_id+"_"+seconds).addClass("arf_advance_error").arf_popover({html:!0,trigger:"manual",placement:position,content:arf_invalid_file_message,animation:!1}),jQuery("#arf_"+funique_id+"_"+seconds).arf_popover("show"),jQuery("#arf_"+funique_id+"_"+seconds).addClass("arfanimated "+bounceeffect)}else $helpBlock.length?($helpBlock=jQuery('<ul role="alert"><li>'+arf_invalid_file_message+"</li></ul>"),jQuery("#arf_"+funique_id+"_"+seconds).parent().parent().parent().find(".help-block").empty(),jQuery("#arf_"+funique_id+"_"+seconds).parent().parent().parent().find(".help-block").append($helpBlock)):($helpBlock=jQuery('<div class="help-block arfanimated bounceInDownNor"><ul role="alert"><li>'+arf_invalid_file_message+"</li></ul></div>"),jQuery("#arf_"+funique_id+"_"+seconds).parent().parent().parent().find(".help-block").append($helpBlock).addClass("arf_error")),jQuery("#arf_"+funique_id+"_"+seconds).addClass("arf_error"),jQuery("#arf_"+funique_id+"_"+seconds+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor");display_original_error||(images=document.getElementById("uploaded_file_name_"+frmid+"_"+frmdataid+"_"+field_id).value,upload_file_key=document.getElementById("upload_field_id_"+frmid+"_"+frmdataid).value,document.getElementById("uploaded_file_name_"+frmid+"_"+frmdataid+"_"+field_id).value=""!=images?images+","+frmid+"_"+field_id+"_"+seconds+"_"+file.name:frmid+"_"+field_id+"_"+seconds+"_"+file.name,document.getElementById("upload_field_id_"+frmid+"_"+frmdataid).value=""!=upload_file_key?upload_file_key+","+field_id_val+"_"+seconds:field_id_val+"_"+seconds),setTimeout(function(){jQuery("#info_"+field_id_val+"_"+arf_new_id+" #percent").html("0"),jQuery("#progress_"+field_id_val+"_"+arf_new_id+" div.bar").css("width","0%")},500)}else{var seconds=(new Date).getTime(),response=data.split("|"),arf_last_file_status;document.getElementById("field_"+field_id_val).value="",void 0!==jQuery('input[name="file'+field_name_id+'"]').attr("multiple")?(arf_last_file_status=jQuery('input[name="file'+field_name_id+'"]').attr("data-file-valid"),"false"!=arf_last_file_status&&jQuery('input[name="file'+field_name_id+'"]').attr("data-file-valid","true")):jQuery('input[name="file'+field_name_id+'"]').attr("data-file-valid","true");var img_name=response[1],extension,extension,val_name,path,crop_data_id,data,cover_image,arf_first_time_open;null==img_name||is_preview||(extension=img_name.split("."),extension=extension[1].toLowerCase(),val_name="__ARF_FILE_PATH_"+frmid,path=eval(val_name),"jpg"!=extension&&"jpeg"!=extension&&"png"!=extension||(crop_data_id=field_name_id+"_"+frmdataid,data=path+img_name,0!=jQuery('.arf_crop_div[data_id="'+crop_data_id+'"]').length&&(jQuery('.arf_crop_div[data_id="'+crop_data_id+'"]').find("img").attr("src",""),jQuery('.arf_crop_div[data_id="'+crop_data_id+'"]').find("img").attr("src",data),cover_image=jQuery('.arf_crop_img[data_id="'+crop_data_id+'"]'),arf_first_time_open=0,cropper_cover=new Cropper(cover_image,{viewMode:4,aspectRatio:1,dragCrop:!0,zoomable:!0,rotatable:!0,dashed:!1,cropBoxResizable:!1,dragMode:"move",zoomOnTouch:!1,crop:function(e){jQuery('.arf_crop_img[data_id="'+crop_data_id+'"]').attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height)),0==arf_first_time_open&&(jQuery('.arf_reset_button.arf_img_setting[data_id="'+crop_data_id+'"]').trigger("click"),jQuery('.arf_crop_img[data_id="'+crop_data_id+'"]').attr("data-coord","0,0,0,0"),arf_first_time_open=1)},background:!1}),jQuery('.arf_img_setting[data_id="'+crop_data_id+'"]').off("click"),jQuery('.arf_img_setting[data_id="'+crop_data_id+'"]').on("click",function(e){var t,a,i,r,n=e||window.event,o=n.target||n.srcElement,d=4;if(cropper_cover){for(;o!==this&&!o.getAttribute("data-method");)o=o.parentNode;if(r={method:o.getAttribute("data-method"),target:o.getAttribute("data-target"),option:o.getAttribute("data-option")||void 0,secondOption:o.getAttribute("data-second-option")||void 0},t=cropper_cover.cropped,r.method){if(void 0!==r.target&&(i=document.querySelector(r.target),!o.hasAttribute("data-option")&&r.target&&i))try{r.option=JSON.parse(i.value)}catch(n){console.log(n.message)}switch(r.method){case"reset":case"rotate":t&&0<d&&cropper_cover.clear();break;case"getCroppedCanvas":try{r.option=JSON.parse(r.option)}catch(n){console.log(n.message)}"image/jpeg"===uploadedImageType&&(r.option||(r.option={}),r.option.fillColor="#fff")}switch(a=cropper_cover[r.method](r.option),r.method){case"rotate":t&&0<d&&cropper_cover.crop();break;case"scaleX":case"scaleY":o.setAttribute("data-option",-r.option);break;case"getCroppedCanvas":a&&(jQuery("#getCroppedCanvasModal").modal().find(".modal-body").html(a),download.disabled||(download.download=uploadedImageName,download.href=a.toDataURL(uploadedImageType)));break;case"destroy":cropper_cover=null,uploadedImageURL&&(URL.revokeObjectURL(uploadedImageURL),uploadedImageURL="",image.src=originalImageURL)}if("object"==typeof a&&a!==cropper_cover&&i)try{i.value=JSON.stringify(a)}catch(n){console.log(n.message)}}}}),jQuery('.arf_crop_div_wrapper[data_id="'+crop_data_id+'"]').bPopup({opacity:.5,closeClass:"arf_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,zIndex:9999999,onClose:function(){cropper_cover.destroy()}}))));var images=document.getElementById("uploaded_file_name_"+frmid+"_"+frmdataid+"_"+field_name_id).value,upload_file_key=document.getElementById("upload_field_id_"+frmid+"_"+frmdataid).value;jQuery("#arf_multi_file_info_"+field_id_val).css("display","inline-block");var image_directory_url=document.getElementById("arf_image_directory_url_"+frmid+"_"+frmdataid).value,default_content=document.getElementById("arf_multi_file_info_"+field_id_val).innerHTML,upload_content='<div id="arf_'+funique_id+'" class="arf_file_info_item"><span id="remove_'+field_id_val+"_"+seconds+'" class="ajax-file-remove" data-current-file-size="'+file.size+'" data-current-file-size-counter="'+arf_new_id+'" data-info-id="info_'+field_id_val+"_"+arf_new_id+'" data-progress-id="progress_'+field_id_val+"_"+arf_new_id+'" style="position: relative; overflow: hidden;" data-form-data-id="'+frmdataid+'" data-form-id="'+frmid+'" data-id="'+field_name_id+'" file-data-id="'+funique_id+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+file.name+"</span></div>";"width: 100%;"!==jQuery("#progress_"+field_id_val+"_"+arf_new_id+" .bar").attr("style")?setTimeout(function(){jQuery("#info_"+field_id_val+"_"+arf_new_id).after(upload_content),jQuery("#progress_"+field_id_val+"_"+arf_new_id).hide(),jQuery("#info_"+field_id_val+"_"+arf_new_id).hide()},300):setTimeout(function(){jQuery("#info_"+field_id_val+"_"+arf_new_id).after(upload_content),jQuery("#progress_"+field_id_val+"_"+arf_new_id).hide(),jQuery("#info_"+field_id_val+"_"+arf_new_id).hide()},700),document.getElementById("uploaded_file_name_"+frmid+"_"+frmdataid+"_"+field_name_id).value=""!=images?images+","+response[1]:void 0!==response[1]?response[1]:"",document.getElementById("upload_field_id_"+frmid+"_"+frmdataid).value=""!=upload_file_key?upload_file_key+","+response[2]+"_"+seconds:void 0!==response[2]?response[2]+"_"+seconds:"";var fkey=response[2];jQuery('.arf_file_drag_reply_container[data-id="field_'+fkey+'"]').removeClass("disable"),setTimeout(function(){jQuery("#arf_multi_file_uploader_"+field_id_val).find(".arfprogress:visible").length<1&&jQuery("#arf_submit_btn_"+random_key).removeAttr("disabled")},1e3)}}}}else{jQuery("#progress_"+field_id_val).hide(),jQuery("#progress_"+field_id_val+"_"+arf_new_id).addClass("counting"),jQuery("#info_"+field_id_val).hide();var file_error=__ARFERR,file_error,arf_invalid_file_message,arf_invalid_file_message,arf_invalid_file_message,arf_invalid_file_message;arf_file_validation?arf_file_size||(arf_invalid_file_message=void 0!==jQuery("#field_"+field_id_val).attr("data-size-invalid-message")&&""!=jQuery("#field_"+field_id_val).attr("data-size-invalid-message")?jQuery("#field_"+field_id_val).attr("data-size-invalid-message"):file_error):arf_invalid_file_message=void 0!==jQuery("#field_"+field_id_val).attr("data-invalid-message")&&""!=jQuery("#field_"+field_id_val).attr("data-invalid-message")?jQuery("#field_"+field_id_val).attr("data-invalid-message"):file_error;var field_id_arr=jQuery("#field_"+field_id_val).attr("name").split("file"),field_id=field_id_arr[1],display_original_error=!0;jQuery('input[name="file'+field_id+'"]').hasClass("arf_reply_drag_file")?(jQuery('input[name="file'+field_id+'"]').attr("data-file-valid","false"),jQuery('input[name="file'+field_id+'"]').trigger("change")):jQuery('input[name="file'+field_id+'"]').attr("data-file-valid","false"),jQuery("#arf_field_"+field_id+"_"+frmdataid+"_container").removeClass("arf_success");var $this=jQuery("#arf_field_"+field_id+"_"+frmdataid+"_container .controls"),$controlGroup=$this.parents(".control-group").first(),$helpBlock=$controlGroup.find(".help-block").first(),form_id=$this.closest("form").find('[data-id="form_id"]').val(),error_type="advance"==jQuery('[data-id="form_tooltip_error_'+form_id+'"]').val()?"advance":"normal",seconds=(new Date).getTime(),image_directory_url=document.getElementById("arf_image_directory_url_"+frmid+"_"+frmdataid).value,upload_content='<div id="arf_'+funique_id+"_"+seconds+'" class="arf_file_info_item"><span id="remove_'+field_id_val+'" class="ajax-file-remove" data-info-id="info_'+field_id_val+"_"+arf_new_id+'" data-progress-id="progress_'+field_id_val+"_"+arf_new_id+'" style="position: relative; overflow: hidden;" data-current-file-size="'+file.size+'" data-current-file-size-counter="'+arf_new_id+'" data-form-data-id="'+frmdataid+'" data-form-id="'+frmid+'" data-id="'+field_name_id+'" file-data-id="'+funique_id+"_"+seconds+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+file.name+"</span></div></span></div>",images,upload_file_key;if(jQuery("#info_"+field_id_val+"_"+arf_new_id).after(upload_content),display_original_error){if("advance"==error_type){if(!jQuery.isFunction(arf_show_tooltip))return;var form_id=$controlGroup.closest("form").find('[data-id="form_id"]').val(),color=jQuery('[data-id="form_tooltip_error_'+form_id+'"]').attr("data-color"),position=jQuery('[data-id="form_tooltip_error_'+form_id+'"]').attr("data-position"),border_color="#f4f4f4",bounceeffect="bounceInRight";"left"==position?bounceeffect="bounceInLeft":"right"==position?bounceeffect="bounceInRight":"top"==position?bounceeffect="bounceInDown":"bottom"==position&&(bounceeffect="bounceInUp"),La=funique_id,Ma=seconds,Na=position,Oa=arf_invalid_file_message,Pa=bounceeffect,setTimeout(function(){jQuery("#arf_"+La+"_"+Ma).addClass("arf_advance_error").arf_popover({html:!0,trigger:"manual",placement:Na,content:Oa,animation:!1}),jQuery("#arf_"+La+"_"+Ma).arf_popover("show"),jQuery("#arf_"+La+"_"+Ma).parents(".arf_file_field").find(".popover").addClass("arfanimated "+Pa)},100)}else $helpBlock.length?($helpBlock=jQuery('<ul role="alert"><li>'+arf_invalid_file_message+"</li></ul>"),jQuery("#arf_"+funique_id+"_"+seconds).parent().parent().parent().find(".help-block").empty(),Qa=funique_id,Ra=seconds,Sa=$helpBlock,setTimeout(function(){jQuery("#arf_"+Qa+"_"+Ra).parent().parent().parent().find(".help-block").append(Sa),jQuery("#arf_"+Qa+"_"+Ra).addClass("arf_error"),jQuery("#arf_"+Qa+"_"+Ra+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor")},100)):($helpBlock=jQuery('<div class="help-block arfanimated bounceInDownNor"><ul role="alert"><li>'+arf_invalid_file_message+"</li></ul></div>"),jQuery("#arf_"+funique_id+"_"+seconds).parent().parent().parent().find(".help-block").append($helpBlock).addClass("arf_error"),jQuery("#arf_"+funique_id+"_"+seconds).addClass("arf_error"),jQuery("#arf_"+funique_id+"_"+seconds+" .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor"));ajaxProcess=!1}display_original_error||(images=document.getElementById("uploaded_file_name_"+frmid+"_"+frmdataid+"_"+field_id).value,upload_file_key=document.getElementById("upload_field_id_"+frmid+"_"+frmdataid).value,document.getElementById("uploaded_file_name_"+frmid+"_"+frmdataid+"_"+field_id).value=""!=images?images+","+frmid+"_"+field_id+"_"+seconds+"_"+file.name:frmid+"_"+field_id+"_"+seconds+"_"+file.name,document.getElementById("upload_field_id_"+frmid+"_"+frmdataid).value=""!=upload_file_key?upload_file_key+","+field_id_val+"_"+seconds:field_id_val+"_"+seconds)}void 0===jQuery("#field_"+field_id_val).attr("multiple")&&jQuery("#field_"+field_id_val).parents(".arf_file_field").hide(),""!=max_file_upload_limit&&0!=max_file_upload_limit&&max_file_upload_limit<=total_files&&jQuery("#field_"+field_id_val).parents(".arf_file_field").hide(),ajaxProcess=!1}}function Init(){var t=[];return jQuery(".arf_form").each(function(){jQuery(this).find(".arf_file_drag_reply_container").each(function(){t.push(jQuery(this).attr("data-id"))})}),jQuery(t).each(function(e){e=jQuery('.arf_file_drag_reply_container[data-id="'+t[e]+'"]')[0];null!=e&&(new XMLHttpRequest).upload&&(e.addEventListener("dragover",FileDragHover,!1),e.addEventListener("dragleave",FileDragHover,!1),e.addEventListener("drop",FileSelectHandlerDrag,!1),e.style.display="block")}),!1}var ajaxProcess=!1;window.is_drag=!1,jQuery(document).on("click",".arf_form .original",function(){var e=$id(jQuery(this).attr("id")),t=jQuery(this).attr("id").replace("field_","");"0"==jQuery("#type_"+t).val()&&(e.addEventListener("change",FileSelectHandler,!1),jQuery(this).attr("id").split("field_")),(new XMLHttpRequest).upload}),jQuery(document).on("click",".arf_reply_drag_file",function(){var e=$id(jQuery(this).attr("id")),t=jQuery(this).attr("id").replace("field_","");if(jQuery('.arf_file_drag_reply_container[data-id="field_'+t+'"]').hasClass("disable"))return!1;"0"==jQuery("#type_"+t).val()&&(e.addEventListener("change",FileSelectHandler,!1),jQuery(this).attr("id").split("field_")),(new XMLHttpRequest).upload}),jQuery(document).on("click",".ajax-file-remove:not(.disable)",function(e){var n=jQuery(this).attr("file-data-id"),t=jQuery(this).attr("id").replace("remove_","");if(window.arf_is_submitting_form)return!1;var a=0<jQuery(this).parents(".arf_child_field").length||!1;if(void 0===n.split("_")[0]){var i=jQuery(this).attr("data-id");jQuery("#arf_"+n).arf_popover("destroy");var o=jQuery(this).attr("data-progress-id"),d=jQuery(this).attr("data-info-id");return jQuery("#"+o).remove(),jQuery("#"+d).remove(),jQuery("#arf_"+n).remove(),jQuery(".arf_field_"+i).find(".arf_file_field").show(),jQuery(".arf_reply_drag_file_label").show(),jQuery('.arf_file_drag_reply_container[data-id="field_'+t+'"]').removeClass("disable"),!1}jQuery(this).addClass("disable");var r,l=jQuery(this).attr("data-id"),s=(n.split("_"),t),f=jQuery(this).attr("data-form-id"),c=jQuery(this).attr("data-form-data-id"),p=jQuery("#uploaded_file_name_"+f+"_"+c+"_"+l).val(),u=jQuery('[data-id="is_form_preview_'+f+'"]').val(),o=jQuery(this).attr("data-progress-id"),d=jQuery(this).attr("data-info-id"),_=(jQuery(this).attr("data-current-file-size"),jQuery(this).attr("data-current-file-size-counter"),jQuery(this).parents(".arf_multi_file_info_container")),h=jQuery(this).parent(".arf_file_info_item").hasClass("arf_error"),m=jQuery(this).parent(".arf_file_info_item").hasClass("arf_advance_error");if(1==m&&(h=m),g="",n.indexOf(".")<0)if(0<=p.indexOf(",")){var v=p.split(","),g="";if(h)-1<v.indexOf(n)&&(g=n);else for(key in v)0<=v[key].indexOf(n)&&(g=v[key])}else g=p;(0<jQuery(this).parents(".controls").find("#arf_reply_drag_and_drop").length||0<jQuery(this).parents(".controls").length)&&((p=jQuery(this).parents(".controls").find(".help-block")).attr("class","help-block"),p.html(""),i=jQuery(this).attr("data-id"),jQuery("#arf_"+n).arf_popover("destroy"),t=jQuery(this).attr("id").replace("remove_",""),o=jQuery(this).attr("data-progress-id"),d=jQuery(this).attr("data-info-id"),a&&(r=jQuery(this).parents(".arf_child_field")),jQuery("#"+o).remove(),jQuery("#"+d).remove(),jQuery("#arf_"+n).remove(),(a?r:jQuery(".arf_field_"+i)).find(".arf_file_field").show(),jQuery(".arf_reply_drag_file_label").show(),jQuery('.arf_file_drag_reply_container[data-id="field_'+t+'"]').removeClass("disable"),jQuery(".ajax-file-remove").removeClass("disable"));var y=1;if(_.find(".ajax-file-remove").each(function(){jQuery(this).attr("data-current-file-size-counter",y),y++}),!h){if(""==g&&0==u)return;if(0,!jQuery.isFunction(is_ssl_replace))return}var w,b,j,i=jQuery(this).parents(".file_main_control");return h?(u=document.getElementById("uploaded_file_name_"+f+"_"+c+"_"+l).value,h=document.getElementById("upload_field_id_"+f+"_"+c).value,""!=g&&(0<=u.indexOf(g+",")?w=u.replace(g+",",""):0<=u.indexOf(","+g)?w=u.replace(","+g,""):0<=u.indexOf(g)&&(w=u.replace(g,"")),0<=h.indexOf(s+",")?j=h.replace(s+",",""):0<=h.indexOf(s)&&(j=h.replace(s,"")),jQuery("#uploaded_file_name_"+f+"_"+c+"_"+l).val(w),jQuery("#upload_field_id_"+f+"_"+c).val(j)),j=jQuery("#arf_"+n).parent().next(),jQuery("#arf_"+n).remove(),j.css("display","none"),jQuery(".ajax-file-remove").removeClass("disable"),jQuery("#"+o).remove(),jQuery("#"+d).remove(),jQuery(this).parent(".arf_file_info_item").remove(),b=!1,_.find(".ajax-file-remove").each(function(){(jQuery(this).parent(".arf_file_info_item").hasClass("arf_error")||jQuery(this).parent(".arf_file_info_item").hasClass("arf_advance_error"))&&(b=!0)}),b||jQuery('input[name="file'+l+'"]').attr("data-file-valid","true"),jQuery('input[name="file'+l+'"]').val("")):(j=jQuery("#arforms_nonce").val(),_=jQuery("#arf_file_token_"+f).val(),jQuery.ajax({type:"POST",url:is_ssl_replace(__ARFAJAXURL),data:"action=arf_delete_file&file_name="+g+"&form_id="+f+"&arf_wpnonce="+j+"&token="+_,success:function(e){var t,a=jQuery("#uploaded_file_name_"+f+"_"+c+"_"+l).val(),i=jQuery("#upload_field_id_"+f+"_"+c).val();0<=i.indexOf(s+",")?r=i.replace(s+",",""):0<=i.indexOf(s)&&(r=i.replace(s,"")),0<=a.indexOf(g+",")?t=a.replace(g+",",""):0<=a.indexOf(","+g)?t=a.replace(","+g,""):0<=a.indexOf(g)&&(t=a.replace(g,"")),jQuery("#uploaded_file_name_"+f+"_"+c+"_"+l).val(t),jQuery("#upload_field_id_"+f+"_"+c).val(r);var r=jQuery("#arf_"+n).parent().next();jQuery("#arf_"+n).remove(),r.css("display","none"),jQuery(".ajax-file-remove").removeClass("disable"),jQuery("#"+o).remove(),jQuery("#"+d).remove()}})),i.find(".arf_file_field").show(),i.find(".arf_reply_drag_file_label").show(),jQuery('.arf_file_drag_reply_container[data-id="field_'+t+'"]').removeClass("disable"),jQuery("#arf_multi_file_uploader_"+t).find(".arfprogress:visible").length<1&&jQuery("#arf_submit_btn_"+c).removeAttr("disabled"),!1}),jQuery(document).on("click",".original_btn",function(){var o=jQuery(this).attr("id").replace("div_","");jQuery("#"+o+"_iframe").contents().find("#fileselect").click();var d=jQuery(this).attr("data-id"),l=jQuery(this).attr("data-form-data-id");jQuery("#arf_field_"+d+"_"+l+"_container").find(".help-block").empty(),jQuery("#arf_field_"+d+"_"+l+"_container").find(".popover").remove(),jQuery("#progress_"+o).hide();var s,e,f,c,p,u,t,a,_,i,r,n,h,m=jQuery("#"+o+"_iframe").contents().find("#fileselect").val();""!=m&&(a=jQuery("#file_types_"+o).val(),s=jQuery("#file_size_"+o).val(),e=a.split(","),i=m.replace(/C:\\fakepath\\/i,""),f=jQuery(this).attr("data-form-id"),c=(new Date).getTime(),n=i.lastIndexOf("."),r=i.substring(n+1),p=/.*(?=\.)/.exec(i),((u=f+"_"+d+"_"+c)+"_"+p).replace(/[^\w\s]/gi,"").replace(" ",""),t=o,a=jQuery('[data-id="is_form_preview_'+f+'"]').val(),n=jQuery('[data-id="arfmainformurl"]').val(),_=jQuery('[data-id="arffiledragurl"]').val(),i=jQuery('[data-id="arf_browser_name"]').attr("data-version"),r=jQuery('[data-id="arf_browser_name"]').val(),jQuery.isFunction(is_ssl_replace)&&(n=is_ssl_replace(n),n=jQuery("#arf_file_token_"+f).val(),jQuery("#"+o+"_iframe").contents().find("form").attr("action",__ARFAJAXURL+"?action=arf_send_form_data&frm="+f+"&field_id="+t+"&file_type=&file_size="+s+"&types_arr="+e+"&is_preview="+a+"&ie_version="+i+"&browser="+r+"&token="+n),jQuery("#"+o+"_iframe").contents().find("form").submit(),jQuery("#div_"+o).css("margin-top","-4px"),jQuery("#progress_"+o).show(),jQuery("#info_"+o).css("display","inline-block"),jQuery("#info_"+o+" .percent").html("").show(),jQuery("#info_"+o+" #percent").html("Uploading..."),jQuery("#progress_"+o+" div.bar").animate({width:"100%"},"slow"),h=setInterval(function(){if(jQuery("#"+o+"_iframe").contents()){var e,t;0<jQuery("#"+o+"_iframe").contents().find(".uploaded").length&&(clearInterval(h),jQuery("#progress_"+o).removeClass("active").hide(),void 0===jQuery("#field_"+o).attr("multiple")&&jQuery("#field_"+o).parents(".arf_file_field").hide(),jQuery("#info_"+o+" #percent").html("File Uploaded").hide(),jQuery('input[name="file'+d+'"]').val(p),jQuery('input[name="file'+d+'"]').attr("data-file-valid","true"),n=jQuery("#"+o+"_iframe").contents().find(".uploaded").html().split("|"),i=document.getElementById("uploaded_file_name_"+f+"_"+l+"_"+d).value,r=document.getElementById("upload_field_id_"+f+"_"+l).value,jQuery("#arf_multi_file_info_"+o).css("display","inline-block"),document.getElementById("arf_image_directory_url_"+f+"_"+l).value,e=document.getElementById("arf_multi_file_info_"+o).innerHTML,a=jQuery("#arf_multi_file_uploader_"+o).find(".arfprogress.counting:last").attr("arfupldcnt"),t="undefined"==(t=jQuery("#arf_multi_file_uploader_"+o).find(".arfprogress.counting").length)||isNaN(t)||""==t?1:parseInt(t)+1,a="undefined"==a||isNaN(a)||""==a?1:parseInt(a)+1,a='<div id="arf_'+u+'" class="arf_file_info_item"><span id="remove_'+o+'" class="ajax-file-remove" data-current-file-size="'+s+'" data-current-file-size-counter="'+a+'" style="position: relative; overflow: hidden; float:left;" data-form-data-id="'+l+'" data-form-id="'+f+'" data-id="'+d+'" file-data-id="'+u+'" ><svg height="19px" width="19px"><g><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#ff0000" d="M16.939,5.845h-1.415V17.3c0,0.292-0.236,0.529-0.529,0.529H4.055  c-0.292,0-0.529-0.237-0.529-0.529V5.845H2.018c-0.292,0-0.529-0.739-0.529-1.031s0.237-0.982,0.529-0.982h2.509V1.379  c0-0.293,0.237-0.529,0.529-0.529h8.954c0.293,0,0.529,0.236,0.529,0.529v2.452h2.399c0.292,0,0.529,0.69,0.529,0.982  S17.231,5.845,16.939,5.845z M12.533,2.811H6.517v1.011h6.016V2.811z M13.541,5.845l-0.277-0.031L5.788,5.845H5.534v10.001h8.007  V5.845z M8.525,13.849H7.534v-6.08h0.991V13.849z M11.525,13.849h-0.991v-6.08h0.991V13.849z" /></g></svg></span><span id="file_name" class="file_name arf_info">'+m.replace(/C:\\fakepath\\/i,"")+"</span></div>",document.getElementById("arf_multi_file_info_"+o).innerHTML=e+a,document.getElementById("uploaded_file_name_"+f+"_"+l+"_"+d).value=""!=i?i+","+n[1]:n[1],document.getElementById("upload_field_id_"+f+"_"+l).value=""!=r?r+","+n[2]+"_"+c:n[2]+"_"+c,jQuery("#"+o+"_iframe_div").html(" ").append('<iframe id="'+o+'_iframe" src="'+_+'/core/views/iframe.php"></iframe>'));var a=jQuery("#"+o+"_iframe").contents().find(".error_upload").length,i=jQuery("#"+o+"_iframe").contents().find(".error_upload_size").length;if(0<a||0<i){clearInterval(h);var r=d;jQuery('input[name="file'+r+'"]').attr("data-file-valid","false"),jQuery("#info_"+o+" .percent").html("").hide(),jQuery("#info_"+o+" #percent").html(""),jQuery("#info_"+o).hide(),jQuery("#progress_"+o+" div.bar").css({width:"100%"}),jQuery("#progress_"+o).hide(),n="undefined"!=typeof __ARFERR?__ARFERR:"Sorry, this file type is not permitted for security reasons.",i=0<a?void 0!==jQuery("#field_"+o).attr("data-invalid-message")&&""!=jQuery("#field_"+o).attr("data-invalid-message")?jQuery("#field_"+o).attr("data-invalid-message"):n:void 0!==jQuery("#field_"+o).attr("data-size-invalid-message")&&""!=jQuery("#field_"+o).attr("data-size-invalid-message")?jQuery("#field_"+o).attr("data-size-invalid-message"):n,jQuery("#arf_field_"+r+"_"+l+"_container").removeClass("arf_success");var a=jQuery("#arf_field_"+r+"_"+l+"_container .controls"),n=a.parents(".control-group").first(),r=n.find(".help-block").first(),a=a.closest("form").find('[data-id="form_id"]').val();if("advance"==("advance"==jQuery('[data-id="form_tooltip_error_'+a+'"]').val()?"advance":"normal")){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(n,r,i)}else r.length?(r=jQuery('<ul role="alert"><li>'+i+"</li></ul>"),n.find(".controls .help-block").append(r)):(r=jQuery('<div class="help-block"><ul><li>'+i+"</li></ul></div>"),n.find(".controls").append(r)),n.find(".controls .help-block").removeClass("arfanimated bounceInDownNor").addClass("arfanimated bounceInDownNor");jQuery("#"+o+"_iframe_div").html(" ").append('<iframe id="'+o+'_iframe" src="'+_+'/core/views/iframe_multiple.php"></iframe>')}}},1e3)))}),jQuery(document).ready(function(e){window.File&&window.FileList&&window.FileReader&&Init()}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a,i=t();for(a in i)("object"==typeof exports?exports:e)[a]=i[a]}}(this,function(){return i=[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=i(a(1)),c=i(a(2)),d=i(a(3)),l=i(a(5)),s=i(a(6)),f=i(a(7)),p=i(a(8)),u=i(a(9)),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),h="cropper",m=h+"-hidden",v="error",g="load",y=/^data:/,w=void 0,r=(r(b,[{key:"init",value:function(){var e=this,t=e.element,a=t.tagName.toLowerCase(),i=void 0;if(!_.getData(t,h)){if(_.setData(t,h,e),"img"===a){if(e.isImg=!0,e.originalUrl=i=t.getAttribute("src"),!i)return;i=t.src}else"canvas"===a&&window.HTMLCanvasElement&&(i=t.toDataURL());e.load(i)}}},{key:"load",value:function(e){var t,a=this,i=a.options,r=a.element;e&&(a.url=e,a.imageData={},i.checkOrientation&&window.ArrayBuffer?y.test(e)?a.read(_.dataURLToArrayBuffer(e)):((t=new XMLHttpRequest).onerror=t.onabort=function(){a.clone()},t.onload=function(){a.read(t.response)},i.checkCrossOrigin&&_.isCrossOriginURL(e)&&r.crossOrigin&&(e=_.addTimestamp(e)),t.open("get",e),t.responseType="arraybuffer",t.send()):a.clone())}},{key:"read",value:function(e){var t=this.options,a=_.getOrientation(e),i=this.imageData,r=0,n=1,o=1;if(1<a)switch(this.url=_.arrayBufferToDataURL(e),a){case 2:n=-1;break;case 3:r=-180;break;case 4:o=-1;break;case 5:r=90,o=-1;break;case 6:r=90;break;case 7:r=90,n=-1;break;case 8:r=-90}t.rotatable&&jQuery("#arf_crop_image").attr("data-rotate",r),t.scalable&&(i.scaleX=n,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var e,t,a=this,i=a.element,r=a.url,n=void 0,o=void 0;a.options.checkCrossOrigin&&_.isCrossOriginURL(r)&&(o=(n=i.crossOrigin)?r:(n="anonymous",_.addTimestamp(r))),a.crossOrigin=n,a.crossOriginUrl=o;var d=_.createElement("img");n&&(d.crossOrigin=n),d.src=o||r,a.image=d,a.onStart=e=_.proxy(a.start,a),a.onStop=t=_.proxy(a.stop,a),a.isImg?i.complete?a.start():_.addListener(i,g,e):(_.addListener(d,g,e),_.addListener(d,v,t),_.addClass(d,"cropper-hide"),i.parentNode.insertBefore(d,i.nextSibling))}},{key:"start",value:function(e){var a=this,t=a.isImg?a.element:a.image;e&&(_.removeListener(t,g,a.onStart),_.removeListener(t,v,a.onStop)),_.getImageSize(t,function(e,t){_.extend(a.imageData,{naturalWidth:e,naturalHeight:t,aspectRatio:e/t}),a.loaded=!0,a.build()})}},{key:"stop",value:function(){var e=this.image;_.removeListener(e,g,this.onStart),_.removeListener(e,v,this.onStop),_.removeChild(e),this.image=null}},{key:"build",value:function(){var e,t,a,i,r,n,o=this,d=o.options,l=o.element,s=o.image,f=void 0;o.loaded&&(o.ready&&o.unbuild(),(n=_.createElement("div")).innerHTML=c.default,o.container=f=l.parentNode,o.cropper=e=_.getByClass(n,"cropper-container")[0],o.canvas=t=_.getByClass(e,"cropper-canvas")[0],o.dragBox=a=_.getByClass(e,"cropper-drag-box")[0],o.cropBox=i=_.getByClass(e,"cropper-crop-box")[0],o.viewBox=_.getByClass(e,"cropper-view-box")[0],o.face=r=_.getByClass(i,"cropper-face")[0],_.appendChild(t,s),_.addClass(l,m),f.insertBefore(e,l.nextSibling),o.isImg||_.removeClass(s,"cropper-hide"),o.initPreview(),o.bind(),d.aspectRatio=Math.max(0,d.aspectRatio)||NaN,d.viewMode=Math.max(0,Math.min(3,Math.round(d.viewMode)))||0,d.autoCrop?(o.cropped=!0,d.modal&&_.addClass(a,"cropper-modal")):_.addClass(i,m),d.guides||_.addClass(_.getByClass(i,"cropper-dashed"),m),d.center||_.addClass(_.getByClass(i,"cropper-center"),m),d.background&&_.addClass(e,"cropper-bg"),d.highlight||_.addClass(r,"cropper-invisible"),d.cropBoxMovable&&(_.addClass(r,"cropper-move"),_.setData(r,"action","all")),d.cropBoxResizable||(_.addClass(_.getByClass(i,"cropper-line"),m),_.addClass(_.getByClass(i,"cropper-point"),m)),o.setDragMode(d.dragMode),o.render(),o.ready=!0,o.setData(d.data),setTimeout(function(){_.isFunction(d.ready)&&_.addListener(l,"ready",d.ready,!0),_.dispatchEvent(l,"ready"),_.dispatchEvent(l,"crop",o.getData()),o.complete=!0},0))}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,_.removeChild(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=w,b}},{key:"setDefaults",value:function(e){_.extend(o.default,_.isPlainObject(e)&&e)}}]),b);function b(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);var a=this;a.element=e[0],a.options=_.extend({},o.default,_.isPlainObject(t)&&t),a.loaded=!1,a.ready=!1,a.complete=!1,a.rotated=!1,a.cropped=!1,a.disabled=!1,a.replaced=!1,a.limited=!1,a.wheeling=!1,a.isImg=!1,a.originalUrl="",a.canvasData=null,a.cropBoxData=null,a.previews=null,a.init()}_.extend(r.prototype,d.default),_.extend(r.prototype,l.default),_.extend(r.prototype,s.default),_.extend(r.prototype,f.default),_.extend(r.prototype,p.default),_.extend(r.prototype,u.default),"undefined"!=typeof window&&(w=window.Cropper,window.Cropper=r),t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!1,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>'},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4));t.default={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e,t=this,a=t.options,i=t.element,r=t.container,n=t.cropper;s.addClass(n,"cropper-hidden"),s.removeClass(i,"cropper-hidden"),t.containerData=e={width:Math.max(r.offsetWidth,Number(a.minContainerWidth)||200),height:Math.max(r.offsetHeight,Number(a.minContainerHeight)||100)},s.setStyle(n,{width:e.width,height:e.height}),s.addClass(i,"cropper-hidden"),s.removeClass(n,"cropper-hidden")},initCanvas:function(){var e=this,t=e.options.viewMode,a=e.containerData,i=e.imageData,r=90===Math.abs(i.rotate),n=r?i.naturalHeight:i.naturalWidth,o=r?i.naturalWidth:i.naturalHeight,d=n/o,l=a.width,r=a.height;a.height*d>a.width?3===t?l=a.height*d:r=a.width/d:3===t?r=a.width/d:l=a.height*d;d={naturalWidth:n,naturalHeight:o,aspectRatio:d,width:l,height:r};d.oldLeft=d.left=(a.width-l)/2,d.oldTop=d.top=(a.height-r)/2,e.canvasData=d,e.limited=1===t||2===t,e.limitCanvas(!0,!0),e.initialImageData=s.extend({},i),e.initialCanvasData=s.extend({},d)},limitCanvas:function(e,t){var a=this,i=a.options,r=i.viewMode,n=a.containerData;null==n&&(n=[]);var o,d,l=a.canvasData,s=(l=null==l?[]:l).aspectRatio,f=a.cropBoxData,c=a.cropped&&f,p=void 0,u=void 0;e&&(p=Number(i.minCanvasWidth)||0,u=Number(i.minCanvasHeight)||0,1<r?(p=Math.max(p,n.width),u=Math.max(u,n.height),3===r&&(p<u*s?p=u*s:u=p/s)):0<r&&(p?p=Math.max(p,c?f.width:0):u?u=Math.max(u,c?f.height:0):c&&((p=f.width)<(u=f.height)*s?p=u*s:u=p/s)),p&&u?p<u*s?u=p/s:p=u*s:p?u=p/s:u&&(p=u*s),l.minWidth=p,l.minHeight=u,l.maxWidth=1/0,l.maxHeight=1/0),t&&(r?(o=n.width-l.width,d=n.height-l.height,l.minLeft=Math.min(0,o),l.minTop=Math.min(0,d),l.maxLeft=Math.max(0,o),l.maxTop=Math.max(0,d),c&&a.limited&&(l.minLeft=Math.min(f.left,f.left+(f.width-l.width)),l.minTop=Math.min(f.top,f.top+(f.height-l.height)),l.maxLeft=f.left,l.maxTop=f.top,2===r&&(l.width>=n.width&&(l.minLeft=Math.min(0,o),l.maxLeft=Math.max(0,o)),l.height>=n.height&&(l.minTop=Math.min(0,d),l.maxTop=Math.max(0,d))))):(l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=n.width,l.maxTop=n.height))},renderCanvas:function(e){var t=this,a=t.canvasData;null==a&&(a=[]);var i,r=t.imageData,n=r.rotate,o=void 0;t.rotated&&(t.rotated=!1,(i=(o=s.getRotatedSizes({width:r.width,height:r.height,degree:n})).width/o.height)!==a.aspectRatio&&(a.left-=(o.width-a.width)/2,a.top-=(o.height-a.height)/2,a.width=o.width,a.height=o.height,a.aspectRatio=i,a.naturalWidth=r.naturalWidth,a.naturalHeight=r.naturalHeight,n%180&&(o=s.getRotatedSizes({width:r.naturalWidth,height:r.naturalHeight,degree:n}),a.naturalWidth=o.width,a.naturalHeight=o.height),t.limitCanvas(!0,!1))),(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),t.limitCanvas(!1,!0),a.oldLeft=a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),s.setStyle(t.canvas,{width:a.width,height:a.height,left:a.left,top:a.top}),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(e){var t=this.canvasData;null==t&&(t=[]);var a,i,r,n=this.imageData,o=void 0;n.rotate&&(o={width:i=(a=s.getRotatedSizes({width:t.width,height:t.height,degree:n.rotate,aspectRatio:n.aspectRatio},!0)).width,height:r=a.height,left:(t.width-i)/2,top:(t.height-r)/2}),s.extend(n,o||{width:t.width,height:t.height,left:0,top:0});t=s.getTransform(n);s.setStyle(this.image,{width:n.width,height:n.height,marginLeft:n.left,marginTop:n.top,WebkitTransform:t,msTransform:t,transform:t}),e&&this.output()},initCropBox:function(){var e=this,t=e.options,a=t.aspectRatio,i=Number(t.autoCropArea)||.8,r=e.canvasData,t={width:r.width,height:r.height};a&&(r.height*a>r.width?t.height=t.width/a:t.width=t.height*a),e.cropBoxData=t,e.limitCropBox(!0,!0),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),t.width=Math.max(t.minWidth,t.width*i),t.height=Math.max(t.minHeight,t.height*i),t.oldLeft=t.left=r.left+(r.width-t.width)/2,t.oldTop=t.top=r.top+(r.height-t.height)/2,e.initialCropBoxData=s.extend({},t)},limitCropBox:function(e,t){var a=this,i=a.options,r=i.aspectRatio,n=a.containerData,o=a.canvasData,d=a.cropBoxData,l=a.limited,s=void 0,f=void 0,c=void 0,a=void 0;null==d&&(d=[]),null==n&&(n=[]),e&&(s=Number(i.minCropBoxWidth)||0,f=Number(i.minCropBoxHeight)||0,s=Math.min(s,n.width),f=Math.min(f,n.height),c=Math.min(n.width,(l?o:n).width),a=Math.min(n.height,(l?o:n).height),r&&(s&&f?s<f*r?f=s/r:s=f*r:s?f=s/r:f&&(s=f*r),c<a*r?a=c/r:c=a*r),d.minWidth=Math.min(s,c),d.minHeight=Math.min(f,a),d.maxWidth=c,d.maxHeight=a),t&&(l?(d.minLeft=Math.max(0,o.left),d.minTop=Math.max(0,o.top),d.maxLeft=Math.min(n.width,o.left+o.width)-d.width,d.maxTop=Math.min(n.height,o.top+o.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=n.width-d.width,d.maxTop=n.height-d.height))},renderCropBox:function(){var e=this,t=e.options,a=e.containerData,i=e.cropBoxData;((i=null==i?[]:i).width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),e.limitCropBox(!1,!0),i.oldLeft=i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),t.movable&&t.cropBoxMovable&&s.setData(e.face,"action",i.width===(a=null==a?[]:a).width&&i.height===a.height?"move":"all"),s.setStyle(e.cropBox,{width:i.width,height:i.height,left:i.left,top:i.top}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){this.preview(),this.complete&&s.dispatchEvent(this.element,"crop",this.getData())}}},function(e,t){"use strict";function a(e){return M.call(e).slice(8,-1).toLowerCase()}function g(e){return"number"==typeof e&&!isNaN(e)}function r(e){return void 0===e}function o(e){return"object"===(void 0===e?"undefined":_(e))&&null!==e}function n(e){return"function"===a(e)}function d(e){return Array.isArray?Array.isArray(e):"array"===a(e)}function l(e){return e="string"==typeof e?e.trim?e.trim():e.replace(x,"$1"):e}function s(t,a){if(t&&n(a)){var e=void 0;if(d(t)||g(t.length))for(var i=t.length,e=0;e<i&&!1!==a.call(t,t[e],e,t);e++);else o(t)&&Object.keys(t).forEach(function(e){a.call(t,t[e],e,t)})}return t}function f(e,t){var a;g((e=null==e?[]:e).length)?s(e,function(e){f(e,t)}):e.classList?e.classList.add(t):(a=l(e.className))?a.indexOf(t)<0&&(e.className=a+" "+t):e.className=t}function c(e,t){g((e=null==e?[]:e).length)?s(e,function(e){c(e,t)}):e.classList?e.classList.remove(t):0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,""))}function i(e){return e.replace(m,"$1-$2").toLowerCase()}function p(t,e,a){var i=l(e).split(b);1<i.length?s(i,function(e){p(t,e,a)}):t.removeEventListener?t.removeEventListener(e,a,!1):t.detachEvent&&t.detachEvent("on"+e,a)}function y(e){return document.createElement(e)}function w(e,t){var a=Math.abs(e.degree)%180,i=(90<a?180-a:a)*Math.PI/180,r=Math.sin(i),n=Math.cos(i),o=e.width,d=e.height,a=e.aspectRatio,i=void 0,e=void 0,e=t?(i=o/(n+r/a))/a:(i=o*n+d*r,o*r+d*n);return{width:i,height:e}}function u(e,t,a){var i="",r=t;for(a+=t;r<a;r++)i+=B(e.getUint8(r));return i}Object.defineProperty(t,"__esModule",{value:!0});var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.typeOf=a,t.isNumber=g,t.isUndefined=r,t.isObject=o,t.isPlainObject=function(e){if(!o(e))return!1;try{var t=e.constructor,a=t.prototype;return t&&a&&k.call(a,"isPrototypeOf")}catch(e){return!1}},t.isFunction=n,t.isArray=d,t.toArray=function(e,t){return t=0<=t?t:0,Array.from?Array.from(e).slice(t):D.call(e,t)},t.trim=l,t.each=s,t.extend=function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=!0===t[0],n=r?t[1]:t[0];return 1<t.length&&(t.shift(),null==n&&(n=[]),t.forEach(function(t){o(t)&&Object.keys(t).forEach(function(e){r&&o(n[e])?a(!0,n[e],t[e]):n[e]=t[e]})})),n},t.proxy=function(i,r){for(var e=arguments.length,n=Array(2<e?e-2:0),t=2;t<e;t++)n[t-2]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i.apply(r,n.concat(t))}},t.setStyle=function(e,t){var a=(e=null==e?[]:e).style;null==a&&(a=[]),s(t,function(e,t){j.test(t)&&g(e)&&(e+="px"),a[t]=e})},t.hasClass=function(e,t){return e.classList?e.classList.contains(t):-1<e.className.indexOf(t)},t.addClass=f,t.removeClass=c,t.toggleClass=function t(e,a,i){g(e.length)?s(e,function(e){t(e,a,i)}):(i?f:c)(e,a)},t.hyphenate=i,t.getData=function(e,t){return o(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+i(t))},t.setData=function(e,t,a){o(a)?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-"+i(t),a)},t.removeData=function(e,t){o(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+i(t))},t.removeListener=p,t.dispatchEvent=function(e,t,a){if(e.dispatchEvent){var i=void 0;return n(Event)&&n(CustomEvent)?i=r(a)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):r(a)?(i=document.createEvent("Event")).initEvent(t,!0,!0):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,a),e.dispatchEvent(i)}return!e.fireEvent||e.fireEvent("on"+t)},t.getEvent=function(e){var t,a=e||window.event;return a.target||(a.target=a.srcElement||document),!g(a.pageX)&&g(a.clientX)&&(e=(t=e.target.ownerDocument||document).documentElement,t=t.body,a.pageX=a.clientX+((e&&e.scrollLeft||t&&t.scrollLeft||0)-(e&&e.clientLeft||t&&t.clientLeft||0)),a.pageY=a.clientY+((e&&e.scrollTop||t&&t.scrollTop||0)-(e&&e.clientTop||t&&t.clientTop||0))),a},t.getOffset=function(e){var t=document.documentElement;return{left:(e=e.getBoundingClientRect()).left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:e.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}},t.getTouchesCenter=function(e){var t=e.length,a=0,i=0;return t&&(s(e,function(e){a+=e.pageX,i+=e.pageY}),a/=t,i/=t),{pageX:a,pageY:i}},t.getByTag=function(e,t){return e.getElementsByTagName(t)},t.getByClass=function(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)},t.createElement=y,t.appendChild=function(e,t){e.appendChild(t)},t.removeChild=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.empty=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.isCrossOriginURL=function(e){return(e=e.match(v))&&(e[1]!==location.protocol||e[2]!==location.hostname||e[3]!==location.port)},t.addTimestamp=function(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t},t.getImageSize=function(e,t){var a;!e.naturalWidth||C?((a=y("img")).onload=function(){t(this.width,this.height)},a.src=e.src):t(e.naturalWidth,e.naturalHeight)},t.getTransform=function(e){var t=[],a=e.rotate,i=e.scaleX,e=e.scaleY;return g(a)&&0!==a&&t.push("rotate("+a+"deg)"),g(i)&&1!==i&&t.push("scaleX("+i+")"),g(e)&&1!==e&&t.push("scaleY("+e+")"),t.length?t.join(" "):"none"},t.getRotatedSizes=w,t.getSourceCanvas=function(e,t){var a=y("canvas"),i=a.getContext("2d"),r=0,n=0,o=t.naturalWidth,d=t.naturalHeight,l=t.rotate,s=t.scaleX,f=t.scaleY,c=g(s)&&g(f)&&(1!==s||1!==f),p=g(l)&&0!==l,u=p||c,_=o*Math.abs(s),h=d*Math.abs(f),m=void 0,v=void 0,t=void 0;return c&&(m=_/2,v=h/2),p&&(m=(_=(t=w({width:_,height:h,degree:l})).width)/2,v=(h=t.height)/2),a.width=_,a.height=h,u&&(r=-o/2,n=-d/2,i.save(),i.translate(m,v)),p&&i.rotate(l*Math.PI/180),c&&i.scale(s,f),i.drawImage(e,Math.floor(r),Math.floor(n),Math.floor(o),Math.floor(d)),u&&i.restore(),a},t.getStringFromCharCode=u,t.getOrientation=function(e){var t,a,i=new DataView(e),r=i.byteLength,n=void 0,o=void 0,e=void 0,d=void 0,l=void 0,s=void 0,f=void 0;if(255===i.getUint8(0)&&216===i.getUint8(1))for(s=2;s<r;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){d=s;break}s++}if(d&&(t=d+10,"Exif"===u(i,d+4,4)&&((o=18761===(e=i.getUint16(t)))||19789===e)&&42===i.getUint16(t+2,o)&&8<=(a=i.getUint32(t+4,o))&&(l=t+a)),l)for(r=i.getUint16(l,o),f=0;f<r;f++)if(274===i.getUint16(s=l+12*f+2,o)){s+=8,n=i.getUint16(s,o),C&&i.setUint16(s,1,o);break}return n},t.dataURLToArrayBuffer=function(e){for(var e=e.replace(h,""),t=atob(e),a=t.length,e=new ArrayBuffer(a),i=new Uint8Array(e),r=void 0,r=0;r<a;r++)i[r]=t.charCodeAt(r);return e},t.arrayBufferToDataURL=function(e){for(var t=new Uint8Array(e),a=t.length,i="",r=void 0,r=0;r<a;r++)i+=B(t[r]);return"data:image/jpeg;base64,"+btoa(i)};var h=/^data:([^;]+);base64,/,m=/([a-z\d])([A-Z])/g,v=/^(https?:)\/\/([^:\/\?#]+):?(\d*)/i,b=/\s+/,j=/^(width|height|left|top|marginLeft|marginTop)$/,x=/^\s+(.*)\s+$/,Q=window.navigator,C=Q&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(Q.userAgent),Q=Object.prototype,M=Q.toString,k=Q.hasOwnProperty,D=Array.prototype.slice,B=String.fromCharCode;t.addListener=function t(i,r,n,e){var a=l(r).split(b),o=n;1<a.length?s(a,function(e){t(i,e,n)}):(e&&(n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return p(i,r,n),o.apply(i,t)}),i.addEventListener?i.addEventListener(r,n,!1):i.attachEvent&&i.attachEvent("on${type}",n))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),_="preview";t.default={initPreview:function(){var e=this,t=e.options.preview,a=u.createElement("img"),i=e.crossOrigin,r=i?e.crossOriginUrl:e.url;i&&(a.crossOrigin=i),a.src=r,u.appendChild(e.viewBox,a),e.image2=a,t&&(t=document.querySelectorAll(t),e.previews=t,u.each(t,function(e){var t=u.createElement("img");u.setData(e,_,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),i&&(t.crossOrigin=i),t.src=r,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',u.empty(e),u.appendChild(e,t)}))},resetPreview:function(){u.each(this.previews,function(e){var t=u.getData(e,_);u.setStyle(e,{width:t.width,height:t.height}),e.innerHTML=t.html,u.removeData(e,_)})},preview:function(){var e=this,t=e.imageData,a=e.canvasData,i=e.cropBoxData,o=(i=null==i?[]:i).width,d=i.height,l=t.width,s=t.height,f=i.left-(a=null==a?[]:a).left-t.left,c=i.top-a.top-t.top,t=u.getTransform(t),p={WebkitTransform:t,msTransform:t,transform:t};e.cropped&&!e.disabled&&(u.setStyle(e.image2,u.extend({width:l,height:s,marginLeft:-f,marginTop:-c},p)),u.each(e.previews,function(e){var t=u.getData(e,_),a=t.width,i=t.height,r=a,n=i,t=1;o&&(n=d*(t=a/o)),d&&i<n&&(r=o*(t=i/d),n=i),u.setStyle(e,{width:r,height:n}),u.setStyle(u.getByTag(e,"img")[0],u.extend({width:l*t,height:s*t,marginLeft:-f*t,marginTop:-c*t},p))}))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),n="mousedown touchstart pointerdown MSPointerDown",o="mousemove touchmove pointermove MSPointerMove",d="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",l="wheel mousewheel DOMMouseScroll",s="dblclick",f="cropstart",c="cropmove",p="cropend";t.default={bind:function(){var e=this,t=e.options,a=e.element,i=e.cropper;r.isFunction(t.cropstart)&&r.addListener(a,f,t.cropstart),r.isFunction(t.cropmove)&&r.addListener(a,c,t.cropmove),r.isFunction(t.cropend)&&r.addListener(a,p,t.cropend),r.isFunction(t.crop)&&r.addListener(a,"crop",t.crop),r.isFunction(t.zoom)&&r.addListener(a,"zoom",t.zoom),r.addListener(i,n,e.onCropStart=r.proxy(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&r.addListener(i,l,e.onWheel=r.proxy(e.wheel,e)),t.toggleDragModeOnDblclick&&r.addListener(i,s,e.onDblclick=r.proxy(e.dblclick,e)),r.addListener(document,o,e.onCropMove=r.proxy(e.cropMove,e)),r.addListener(document,d,e.onCropEnd=r.proxy(e.cropEnd,e)),t.responsive&&r.addListener(window,"resize",e.onResize=r.proxy(e.resize,e))},unbind:function(){var e=this,t=e.options,a=e.element,i=e.cropper;r.isFunction(t.cropstart)&&r.removeListener(a,f,t.cropstart),r.isFunction(t.cropmove)&&r.removeListener(a,c,t.cropmove),r.isFunction(t.cropend)&&r.removeListener(a,p,t.cropend),r.isFunction(t.crop)&&r.removeListener(a,"crop",t.crop),r.isFunction(t.zoom)&&r.removeListener(a,"zoom",t.zoom),r.removeListener(i,n,e.onCropStart),t.zoomable&&t.zoomOnWheel&&r.removeListener(i,l,e.onWheel),t.toggleDragModeOnDblclick&&r.removeListener(i,s,e.onDblclick),r.removeListener(document,o,e.onCropMove),r.removeListener(document,d,e.onCropEnd),t.responsive&&r.removeListener(window,"resize",e.onResize)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGEXP_ACTIONS=void 0;var d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),l=t.REGEXP_ACTIONS=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;t.default={resize:function(){var a,i,r,e=this,t=e.options.restore,n=e.container,o=e.containerData;!e.disabled&&o&&(a=n.offsetWidth/o.width,r=i=void 0,1==a&&n.offsetHeight===o.height||(t&&(i=e.getCanvasData(),r=e.getCropBoxData()),e.render(),t&&(e.setCanvasData(d.each(i,function(e,t){i[t]=e*a})),e.setCropBoxData(d.each(r,function(e,t){r[t]=e*a})))))},dblclick:function(){this.disabled||this.setDragMode(d.hasClass(this.dragBox,"cropper-crop")?"move":"crop")},wheel:function(e){var t=this,a=d.getEvent(e),i=Number(t.options.wheelZoomRatio)||.1,e=1;t.disabled||(a.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?e=0<a.deltaY?1:-1:a.wheelDelta?e=-a.wheelDelta/120:a.detail&&(e=0<a.detail?1:-1),t.zoom(-e*i,a)))},cropStart:function(e){var t,a=this,i=a.options,r=d.getEvent(e),n=r.touches,o=void 0,e=void 0;if(!a.disabled){if(n){if(1<(t=n.length)){if(!i.zoomable||!i.zoomOnTouch||2!==t)return;o=n[1],a.startX2=o.pageX,a.startY2=o.pageY,e="zoom"}o=n[0]}e=e||d.getData(r.target,"action"),l.test(e)&&!1!==d.dispatchEvent(a.element,"cropstart",{originalEvent:r,action:e})&&(r.preventDefault(),a.action=e,a.cropping=!1,a.startX=(o||r).pageX,a.startY=(o||r).pageY,"crop"===e&&(a.cropping=!0,d.addClass(a.dragBox,"cropper-modal")))}},cropMove:function(e){var t,a=this,i=a.options,r=d.getEvent(e),n=r.touches,o=a.action,e=void 0;if(!a.disabled){if(n){if(1<(t=n.length)){if(!i.zoomable||!i.zoomOnTouch||2!==t)return;e=n[1],a.endX2=e.pageX,a.endY2=e.pageY}e=n[0]}o&&!1!==d.dispatchEvent(a.element,"cropmove",{originalEvent:r,action:o})&&(r.preventDefault(),a.endX=(e||r).pageX,a.endY=(e||r).pageY,a.change(r.shiftKey,"zoom"===o?r:null))}},cropEnd:function(e){var t=this,a=t.options,i=d.getEvent(e),e=t.action;t.disabled||e&&(i.preventDefault(),t.cropping&&(t.cropping=!1,d.toggleClass(t.dragBox,"cropper-modal",t.cropped&&a.modal)),t.action="",d.dispatchEvent(t.element,"cropend",{originalEvent:i,action:e}))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4)),x="se",Q="sw",C="ne",M="nw";t.default={change:function(e,t){var a,i=this,r=i.options,n=i.containerData,o=i.canvasData,d=i.cropBoxData,l=r.aspectRatio,s=i.action,f=d.width,c=d.height,p=d.left,u=d.top,_=p+f,h=u+c,m=0,v=0,g=n.width,y=n.height,w=!0;!l&&e&&(l=f&&c?f/c:1),i.limited&&(m=d.minLeft,v=d.minTop,g=m+Math.min(n.width,o.left+o.width),y=v+Math.min(n.height,o.top+o.height));var b={x:i.endX-i.startX,y:i.endY-i.startY};switch(l&&(b.X=b.y*l,b.Y=b.x/l),s){case"all":p+=b.x,u+=b.y;break;case"e":if(0<=b.x&&(g<=_||l&&(u<=v||y<=h))){w=!1;break}f+=b.x,l&&(c=f/l,u-=b.Y/2),f<0&&(s="w",f=0);break;case"n":if(b.y<=0&&(u<=v||l&&(p<=m||g<=_))){w=!1;break}c-=b.y,u+=b.y,l&&(f=c*l,p+=b.X/2),c<0&&(s="s",c=0);break;case"w":if(b.x<=0&&(p<=m||l&&(u<=v||y<=h))){w=!1;break}f-=b.x,p+=b.x,l&&(c=f/l,u+=b.Y/2),f<0&&(s="e",f=0);break;case"s":if(0<=b.y&&(y<=h||l&&(p<=m||g<=_))){w=!1;break}c+=b.y,l&&(f=c*l,p-=b.X/2),c<0&&(s="n",c=0);break;case C:if(l){if(b.y<=0&&(u<=v||g<=_)){w=!1;break}c-=b.y,u+=b.y,f=c*l}else!(0<=b.x)||_<g?f+=b.x:b.y<=0&&u<=v&&(w=!1),b.y<=0&&!(v<u)||(c-=b.y,u+=b.y);f<0&&c<0?(s=Q,f=c=0):f<0?(s=M,f=0):c<0&&(s=x,c=0);break;case M:if(l){if(b.y<=0&&(u<=v||p<=m)){w=!1;break}c-=b.y,u+=b.y,f=c*l,p+=b.X}else!(b.x<=0)||m<p?(f-=b.x,p+=b.x):b.y<=0&&u<=v&&(w=!1),b.y<=0&&!(v<u)||(c-=b.y,u+=b.y);f<0&&c<0?(s=x,f=c=0):f<0?(s=C,f=0):c<0&&(s=Q,c=0);break;case Q:if(l){if(b.x<=0&&(p<=m||y<=h)){w=!1;break}f-=b.x,p+=b.x,c=f/l}else!(b.x<=0)||m<p?(f-=b.x,p+=b.x):0<=b.y&&y<=h&&(w=!1),0<=b.y&&!(h<y)||(c+=b.y);f<0&&c<0?(s=C,f=c=0):f<0?(s=x,f=0):c<0&&(s=M,c=0);break;case x:if(l){if(0<=b.x&&(g<=_||y<=h)){w=!1;break}c=(f+=b.x)/l}else!(0<=b.x)||_<g?f+=b.x:0<=b.y&&y<=h&&(w=!1),0<=b.y&&!(h<y)||(c+=b.y);f<0&&c<0?(s=M,f=c=0):f<0?(s=Q,f=0):c<0&&(s=C,c=0);break;case"move":i.move(b.x,b.y),w=!1;break;case"zoom":i.zoom(function(e,t,a,i){t=Math.sqrt(e*e+t*t);return(Math.sqrt(a*a+i*i)-t)/t}(Math.abs(i.startX-i.startX2),Math.abs(i.startY-i.startY2),Math.abs(i.endX-i.endX2),Math.abs(i.endY-i.endY2)),t),i.startX2=i.endX2,i.startY2=i.endY2,w=!1;break;case"crop":if(!b.x||!b.y){w=!1;break}a=j.getOffset(i.cropper),p=i.startX-a.left,u=i.startY-a.top,f=d.minWidth,c=d.minHeight,0<b.x?s=0<b.y?x:C:b.x<0&&(p-=f,s=0<b.y?Q:M),b.y<0&&(u-=c),i.cropped||(j.removeClass(i.cropBox,"cropper-hidden"),i.cropped=!0,i.limited&&i.limitCropBox(!0,!0))}w&&(d.width=f,d.height=c,d.left=p,d.top=u,i.action=s,i.renderCropBox()),i.startX=i.endX,i.startY=i.endY}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(4));t.default={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&m.addClass(e.dragBox,"cropper-modal"),m.removeClass(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=m.extend({},e.initialImageData),e.canvasData=m.extend({},e.initialCanvasData),e.cropBoxData=m.extend({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(m.extend(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),m.removeClass(e.dragBox,"cropper-modal"),m.addClass(e.cropBox,"cropper-hidden")),e},replace:function(t,e){var a=this;return!a.disabled&&t&&(a.isImg&&(a.element.src=t),e?(a.url=t,a.image.src=t,a.ready&&(a.image2.src=t,m.each(a.previews,function(e){m.getByTag(e,"img")[0].src=t}))):(a.isImg&&(a.replaced=!0),a.options.data=null,a.load(t))),a},enable:function(){return this.ready&&(this.disabled=!1,m.removeClass(this.cropper,"cropper-disabled")),this},disable:function(){return this.ready&&(this.disabled=!0,m.addClass(this.cropper,"cropper-disabled")),this},destroy:function(){var e=this,t=e.element,a=e.image;return e.loaded?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),m.removeClass(t,"cropper-hidden")):e.isImg?m.removeListener(t,"load",e.start):a&&m.removeChild(a),m.removeData(t,"cropper"),e},move:function(e,t){var a=this.canvasData;return this.moveTo(m.isUndefined(e)?e:a.left+Number(e),m.isUndefined(t)?t:a.top+Number(t))},moveTo:function(e,t){var a=this,i=a.canvasData,r=!1;return m.isUndefined(t)&&(t=e),e=Number(e),t=Number(t),a.ready&&!a.disabled&&a.options.movable&&(m.isNumber(e)&&(i.left=e,r=!0),m.isNumber(t)&&(i.top=t,r=!0),r&&a.renderCanvas(!0)),a},zoom:function(e,t){var a=this.canvasData;return e=Number(e),this.zoomTo(a.width*(e=e<0?1/(1-e):1+e)/a.naturalWidth,t)},zoomTo:function(e,t){var a,i,r,n,o=this,d=o.options,l=o.canvasData,s=l.width,f=l.height,c=l.naturalWidth,p=l.naturalHeight;if(0<=(e=Number(e))&&o.ready&&!o.disabled&&d.zoomable){if(i=p*e,!1===m.dispatchEvent(o.element,"zoom",{originalEvent:t,oldRatio:s/c,ratio:(a=c*e)/c}))return o;t?(r=m.getOffset(o.cropper),n=t.touches?m.getTouchesCenter(t.touches):{pageX:t.pageX,pageY:t.pageY},l.left-=(a-s)*((n.pageX-r.left-l.left)/s),l.top-=(i-f)*((n.pageY-r.top-l.top)/f)):(l.left-=(a-s)/2,l.top-=(i-f)/2),l.width=a,l.height=i,o.renderCanvas(!0)}return o},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){var t=this;return e=Number(e),m.isNumber(e)&&t.ready&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var a=this,i=a.imageData,r=!1;return m.isUndefined(t)&&(t=e),e=Number(e),t=Number(t),a.ready&&!a.disabled&&a.options.scalable&&(m.isNumber(e)&&(i.scaleX=e,r=!0),m.isNumber(t)&&(i.scaleY=t,r=!0),r&&a.renderImage(!0)),a},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,m.isNumber(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(m.isNumber(t)?t:1,e)},getData:function(a){var i,e=this,t=e.options,r=e.imageData,n=e.canvasData,o=e.cropBoxData,d=void 0;return e.ready&&e.cropped?(d={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height},i=r.width/r.naturalWidth,m.each(d,function(e,t){e/=i,d[t]=a?Math.round(e):e})):d={x:0,y:0,width:0,height:0},t.rotatable&&(d.rotate=r.rotate||0),t.scalable&&(d.scaleX=r.scaleX||1,d.scaleY=r.scaleY||1),d},setData:function(e){var t,a=this,i=a.options,r=a.imageData,n=a.canvasData,o={},d=void 0,l=void 0;return m.isFunction(e)&&(e=e.call(a.element)),a.ready&&!a.disabled&&m.isPlainObject(e)&&(i.rotatable&&m.isNumber(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,a.rotated=d=!0),i.scalable&&(m.isNumber(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,l=!0),m.isNumber(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,l=!0)),d?a.renderCanvas():l&&a.renderImage(),t=r.width/r.naturalWidth,m.isNumber(e.x)&&(o.left=e.x*t+n.left),m.isNumber(e.y)&&(o.top=e.y*t+n.top),m.isNumber(e.width)&&(o.width=e.width*t),m.isNumber(e.height)&&(o.height=e.height*t),a.setCropBoxData(o)),a},getContainerData:function(){return this.ready?this.containerData:{}},getImageData:function(){return this.loaded?this.imageData:{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&m.each(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(e){var t=this,a=t.canvasData,i=a.aspectRatio;return m.isFunction(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&m.isPlainObject(e)&&(m.isNumber(e.left)&&(a.left=e.left),m.isNumber(e.top)&&(a.top=e.top),m.isNumber(e.width)?(a.width=e.width,a.height=e.width/i):m.isNumber(e.height)&&(a.height=e.height,a.width=e.height*i),t.renderCanvas(!0)),t},getCropBoxData:function(){var e=this.cropBoxData,t=void 0;return(t=this.ready&&this.cropped?{left:e.left,top:e.top,width:e.width,height:e.height}:t)||{}},setCropBoxData:function(e){var t=this,a=t.cropBoxData,i=t.options.aspectRatio,r=void 0,n=void 0;return m.isFunction(e)&&(e=e.call(t.element)),t.ready&&t.cropped&&!t.disabled&&m.isPlainObject(e)&&(m.isNumber(e.left)&&(a.left=e.left),m.isNumber(e.top)&&(a.top=e.top),m.isNumber(e.width)&&(r=!0,a.width=e.width),m.isNumber(e.height)&&(n=!0,a.height=e.height),i&&(r?a.height=a.width/i:n&&(a.width=a.height*i)),t.renderCropBox()),t},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(!t.cropped)return m.getSourceCanvas(t.image,t.imageData);m.isPlainObject(e)||(e={});var a=t.getData(),i=a.width,r=a.height,n=i/r,o=void 0,d=void 0,l=void 0;m.isPlainObject(e)&&(o=e.width,d=e.height,o?(d=o/n,l=o/i):d&&(o=d*n,l=d/r));var s=Math.floor(o||i),f=Math.floor(d||r),c=m.createElement("canvas"),p=c.getContext("2d");c.width=s,c.height=f,e.fillColor&&(p.fillStyle=e.fillColor,p.fillRect(0,0,s,f));var u,_,h,o=(u=m.getSourceCanvas(t.image,t.imageData),_=u.width,h=u.height,n=t.canvasData,o=[u],d=a.x+n.naturalWidth*(Math.abs(a.scaleX||1)-1)/2,e=a.y+n.naturalHeight*(Math.abs(a.scaleY||1)-1)/2,n=u=a=t=f=s=void 0,d<=-i||_<d?d=s=t=u=0:d<=0?(t=-d,d=0,s=u=Math.min(_,i+d)):d<=_&&(t=0,s=u=Math.min(i,_-d)),s<=0||e<=-r||h<e?e=f=a=n=0:e<=0?(a=-e,e=0,f=n=Math.min(h,r+e)):e<=h&&(a=0,f=n=Math.min(r,h-e)),o.push(Math.floor(d),Math.floor(e),Math.floor(s),Math.floor(f)),l&&(t*=l,a*=l,u*=l,n*=l),0<u&&0<n&&o.push(Math.floor(t),Math.floor(a),Math.floor(u),Math.floor(n)),o);return p.drawImage.apply(p,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(o)),c},setAspectRatio:function(e){var t=this,a=t.options;return t.disabled||m.isUndefined(e)||(a.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t,a,i=this,r=i.options,n=i.dragBox,o=i.face;return i.loaded&&!i.disabled&&(a=r.movable&&"move"===e,m.setData(n,"action",e=(t="crop"===e)||a?e:"none"),m.toggleClass(n,"cropper-crop",t),m.toggleClass(n,"cropper-move",a),r.cropBoxMovable||(m.setData(o,"action",e),m.toggleClass(o,"cropper-crop",t),m.toggleClass(o,"cropper-move",a))),i}}}],r={},a.m=i,a.c=r,a.p="",a(0);function a(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,a),t.loaded=!0,t.exports}var i,r}),function(E){E.fn.bPopup=function(e,t){function a(){u.modal&&E('<div class="b-modal '+_+'"></div>').css({backgroundColor:u.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:u.zIndex+T}).appendTo(u.appendTo).fadeTo(u.speed,u.opacity),c(),C.data("bPopup",u).data("id",_).css({left:"slideIn"==u.transition||"slideBack"==u.transition?"slideBack"==u.transition?M.scrollLeft()+B:-1*(w+j):l(!(!u.follow[0]&&v||g)),position:u.positionStyle||"absolute",top:"slideDown"==u.transition||"slideUp"==u.transition?"slideUp"==u.transition?M.scrollTop()+D:y+-1*b:s(!(!u.follow[1]&&m||g)),"z-index":u.zIndex+T+1}).each(function(){u.appending&&E(this).appendTo(u.appendTo)}),o(!0)}function i(){return u.modal&&E(".b-modal."+C.data("id")).fadeTo(u.speed,0,function(){E(this).remove()}),u.scrollBar||E("html").css("overflow","auto"),E(".b-modal."+_).unbind("click"),M.unbind("keydown."+_),k.unbind("."+_).data("bPopup",0<k.data("bPopup")-1?k.data("bPopup")-1:null),C.undelegate(".bClose, ."+u.closeClass,"click."+_,i).data("bPopup",null),clearTimeout(Q),o(),!1}function r(t){D=k.height(),B=k.width(),((h=p()).x||h.y)&&(clearTimeout(x),x=setTimeout(function(){c(),t=t||u.followSpeed;var e={};h.x&&(e.left=u.follow[0]?l(!0):"auto"),h.y&&(e.top=u.follow[1]?s(!0):"auto"),C.dequeue().each(function(){g?E(this).css({left:w,top:y}):E(this).animate(e,t,u.followEasing)})},50))}function n(e){var t=e.width(),a=e.height(),i={};u.contentContainer.css({height:a,width:t}),a>=C.height()&&(i.height=C.height()),t>=C.width()&&(i.width=C.width()),b=C.outerHeight(!0),j=C.outerWidth(!0),c(),u.contentContainer.css({height:"auto",width:"auto"}),i.left=l(!(!u.follow[0]&&v||g)),i.top=s(!(!u.follow[1]&&m||g)),C.animate(i,250,function(){e.show(),h=p()})}function o(t){function e(e){C.css({display:"block",opacity:1}).animate(e,u.speed,u.easing,function(){d(t)})}switch(!t&&u.transitionClose||u.transition){case"slideIn":e({left:t?l(!(!u.follow[0]&&v||g)):M.scrollLeft()-(j||C.outerWidth(!0))-200});break;case"slideBack":e({left:t?l(!(!u.follow[0]&&v||g)):M.scrollLeft()+B+200});break;case"slideDown":e({top:t?s(!(!u.follow[1]&&m||g)):M.scrollTop()-(b||C.outerHeight(!0))-200});break;case"slideUp":e({top:t?s(!(!u.follow[1]&&m||g)):M.scrollTop()+D+200});break;default:C.stop().fadeTo(u.speed,t?1:0,function(){d(t)})}}function d(e){e?(k.data("bPopup",T),C.delegate(".bClose, ."+u.closeClass,"click."+_,i),u.modalClose&&E(".b-modal."+_).css("cursor","pointer").bind("click",i),L||!u.follow[0]&&!u.follow[1]||k.bind("scroll."+_,function(){var e;(h.x||h.y)&&(e={},h.x&&(e.left=u.follow[0]?l(!g):"auto"),h.y&&(e.top=u.follow[1]?s(!g):"auto"),C.dequeue().animate(e,u.followSpeed,u.followEasing))}).bind("resize."+_,function(){r()}),u.escClose&&M.bind("keydown."+_,function(e){27==e.which&&i()}),f(t),u.autoClose&&(Q=setTimeout(i,u.autoClose))):(C.hide(),f(u.onClose),u.loadUrl&&(u.contentContainer.empty(),C.css({height:"auto",width:"auto"})))}function l(e){return e?w+M.scrollLeft():w}function s(e){return e?y+M.scrollTop():y}function f(e,t){E.isFunction(e)&&e.call(C,t)}function c(){y=m?u.position[1]:Math.max(0,(D-C.outerHeight(!0))/2-u.amsl),w=v?u.position[0]:(B-C.outerWidth(!0))/2,h=p()}function p(){return{x:B>C.outerWidth(!0),y:D>C.outerHeight(!0)}}E.isFunction(e)&&(t=e,e=null);var u=E.extend({},E.fn.bPopup.defaults,e);u.scrollBar||E("html").css("overflow","hidden");var _,h,m,v,g,y,w,b,j,x,Q,C=this,M=E(document),k=E(window),D=k.height(),B=k.width(),L=/OS 6(_\d)+/i.test(navigator.userAgent),T=0;return C.close=function(){i()},C.reposition=function(e){r(e)},C.each(function(){E(this).data("bPopup")||(f(u.onOpen),T=(k.data("bPopup")||0)+1,_="__b-popup"+T+"__",m="auto"!==u.position[1],v="auto"!==u.position[0],g="fixed"===u.positionStyle,b=C.outerHeight(!0),j=C.outerWidth(!0),(u.loadUrl?function(){switch(u.contentContainer=E(u.contentContainer||C),u.content){case"iframe":var e=E('<iframe class="b-iframe" '+u.iframeAttr+"></iframe>");e.appendTo(u.contentContainer),b=C.outerHeight(!0),j=C.outerWidth(!0),a(),e.attr("src",u.loadUrl),f(u.loadCallback);break;case"image":a(),E("<img />").load(function(){f(u.loadCallback),n(E(this))}).attr("src",u.loadUrl).hide().appendTo(u.contentContainer);break;default:a(),E('<div class="b-ajax-wrapper"></div>').load(u.loadUrl,u.loadData,function(e,t,a){f(u.loadCallback,t),n(E(this))}).hide().appendTo(u.contentContainer)}}:a)())})},E.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}}(jQuery);